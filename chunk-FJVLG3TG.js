import{Cb as Qo,Db as Wh,Ea as Gh,Fa as wn,Fb as Hh,Ga as qo,Gb as Qh,Ia as Kh,Ja as ft,La as Go,Lb as Yh,Mb as Yo,Nb as Jo,O as Mh,Pa as Ko,Pb as ki,Qb as Ni,Ua as Qt,W as Vh,Wa as Wo,X as Uh,Ya as Ho,a as Le,b as Wt,ba as Bh,c as kt,ca as jh,d as y,da as Er,fa as ge,g as je,ga as jo,ia as G,j as Si,k as bi,ka as he,la as ce,lb as $e,m as xh,ma as $h,mb as de,n as Ci,na as Ht,oa as zh,p as Ri,q as vr,r as Bo,ra as $o,sa as Pi,ta as zo,ua as In,y as Lh,ya as qh}from"./chunk-CWLYJARK.js";function Xo(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&qh(Xo);let r=t?e?.injector?.get(qo)??ce(qo):null,i=Tg(e?.equal),s;e?.requireSync?s=Ho({kind:0},{equal:i}):s=Ho({kind:1,value:e?.initialValue},{equal:i});let a=n.subscribe({next:c=>s.set({kind:1,value:c}),error:c=>{if(e?.rejectErrors)throw c;s.set({kind:2,error:c})}});if(e?.requireSync&&s().kind===0)throw new Er(601,!1);return r?.onDestroy(a.unsubscribe.bind(a)),ki(()=>{let c=s();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new Er(601,!1)}},{equal:e?.equal})}function Tg(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var ta={};function le(n,e){if(ta[n]=(ta[n]||0)+1,typeof e=="function")return Zo(n,(...r)=>Wt(Le({},e(...r)),{type:n}));switch(e?e._as:"empty"){case"empty":return Zo(n,()=>({type:n}));case"props":return Zo(n,r=>Wt(Le({},r),{type:n}));default:throw new Error("Unexpected config.")}}function ze(){return{_as:"props",_p:void 0}}function Zo(n,e){return Object.defineProperty(e,"type",{value:n,writable:!1})}var ld="@ngrx/store/init",Tn=(()=>{class n extends bi{constructor(){super({type:ld})}next(t){if(typeof t=="function")throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ge({token:n,factory:n.\u0275fac})}}return n})(),Ag=[Tn],hd=new G("@ngrx/store Internal Root Guard"),Jh=new G("@ngrx/store Internal Initial State"),oa=new G("@ngrx/store Initial State"),dd=new G("@ngrx/store Reducer Factory"),Xh=new G("@ngrx/store Internal Reducer Factory Provider"),fd=new G("@ngrx/store Initial Reducers"),ea=new G("@ngrx/store Internal Initial Reducers"),J0=new G("@ngrx/store Store Features"),Zh=new G("@ngrx/store Internal Store Reducers"),X0=new G("@ngrx/store Internal Feature Reducers"),Z0=new G("@ngrx/store Internal Feature Configs"),eT=new G("@ngrx/store Internal Store Features"),tT=new G("@ngrx/store Internal Feature Reducers Token"),nT=new G("@ngrx/store Feature Reducers"),ed=new G("@ngrx/store User Provided Meta Reducers"),Oi=new G("@ngrx/store Meta Reducers"),td=new G("@ngrx/store Internal Resolved Meta Reducers"),nd=new G("@ngrx/store User Runtime Checks Config"),rd=new G("@ngrx/store Internal User Runtime Checks Config"),Ir=new G("@ngrx/store Internal Runtime Checks"),pd=new G("@ngrx/store Check if Action types are unique"),id=new G("@ngrx/store Root Store Provider"),rT=new G("@ngrx/store Feature State Provider");function Dg(n,e={}){let t=Object.keys(n),r={};for(let s=0;s<t.length;s++){let a=t[s];typeof n[a]=="function"&&(r[a]=n[a])}let i=Object.keys(r);return function(a,c){a=a===void 0?e:a;let h=!1,d={};for(let p=0;p<i.length;p++){let E=i[p],D=r[E],b=a[E],P=D(b,c);d[E]=P,h=h||P!==b}return h?d:a}}function Sg(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,r)=>Object.assign(t,{[r]:n[r]}),{})}function md(...n){return function(e){if(n.length===0)return e;let t=n[n.length-1];return n.slice(0,-1).reduceRight((i,s)=>s(i),t(e))}}function gd(n,e){return Array.isArray(e)&&e.length>0&&(n=md.apply(null,[...e,n])),(t,r)=>{let i=n(t);return(s,a)=>(s=s===void 0?r:s,i(s,a))}}function bg(n){let e=Array.isArray(n)&&n.length>0?md(...n):t=>t;return(t,r)=>(t=e(t),(i,s)=>(i=i===void 0?r:i,t(i,s)))}var wr=class extends je{},Fi=class extends Tn{},Cg="@ngrx/store/update-reducers",na=(()=>{class n extends bi{get currentReducers(){return this.reducers}constructor(t,r,i,s){super(s(i,r)),this.dispatcher=t,this.initialState=r,this.reducers=i,this.reducerFactory=s}addFeature(t){this.addFeatures([t])}addFeatures(t){let r=t.reduce((i,{reducers:s,reducerFactory:a,metaReducers:c,initialState:h,key:d})=>{let p=typeof s=="function"?bg(c)(s,h):gd(a,c)(s,h);return i[d]=p,i},{});this.addReducers(r)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(r=>r.key))}addReducer(t,r){this.addReducers({[t]:r})}addReducers(t){this.reducers=Le(Le({},this.reducers),t),this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(r=>{this.reducers=Sg(this.reducers,r)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Cg,features:t})}ngOnDestroy(){this.complete()}static{this.\u0275fac=function(r){return new(r||n)(he(Fi),he(oa),he(fd),he(dd))}}static{this.\u0275prov=ge({token:n,factory:n.\u0275fac})}}return n})(),Rg=[na,{provide:wr,useExisting:na},{provide:Fi,useExisting:Tn}],aa=(()=>{class n extends Si{ngOnDestroy(){this.complete()}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Gh(n)))(i||n)}})()}static{this.\u0275prov=ge({token:n,factory:n.\u0275fac})}}return n})(),Pg=[aa],xi=class extends je{},sd=(()=>{class n extends bi{static{this.INIT=ld}constructor(t,r,i,s){super(s);let c=t.pipe(vr(Ci)).pipe(jh(r)),h={state:s},d=c.pipe(Uh(kg,h));this.stateSubscription=d.subscribe(({state:p,action:E})=>{this.next(p),i.next(E)}),this.state=Xo(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static{this.\u0275fac=function(r){return new(r||n)(he(Tn),he(wr),he(aa),he(oa))}}static{this.\u0275prov=ge({token:n,factory:n.\u0275fac})}}return n})();function kg(n={state:void 0},[e,t]){let{state:r}=n;return{state:t(r,e),action:e}}var Ng=[sd,{provide:xi,useExisting:sd}],ua=(()=>{class n extends je{constructor(t,r,i){super(),this.actionsObserver=r,this.reducerManager=i,this.source=t,this.state=t.state}select(t,...r){return Fg.call(null,t,...r)(this)}selectSignal(t,r){return ki(()=>t(this.state()),r)}lift(t){let r=new n(this,this.actionsObserver,this.reducerManager);return r.operator=t,r}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,r){this.reducerManager.addReducer(t,r)}removeReducer(t){this.reducerManager.removeReducer(t)}static{this.\u0275fac=function(r){return new(r||n)(he(xi),he(Tn),he(na))}}static{this.\u0275prov=ge({token:n,factory:n.\u0275fac})}}return n})(),Og=[ua];function Fg(n,e,...t){return function(i){let s;if(typeof n=="string"){let a=[e,...t].filter(Boolean);s=i.pipe(Vh(n,...a))}else if(typeof n=="function")s=i.pipe(Lh(a=>n(a,e)));else throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);return s.pipe(Mh())}}var ca="https://ngrx.io/guide/store/configuration/runtime-checks";function od(n){return n===void 0}function ad(n){return n===null}function _d(n){return Array.isArray(n)}function xg(n){return typeof n=="string"}function Lg(n){return typeof n=="boolean"}function Mg(n){return typeof n=="number"}function yd(n){return typeof n=="object"&&n!==null}function Vg(n){return yd(n)&&!_d(n)}function Ug(n){if(!Vg(n))return!1;let e=Object.getPrototypeOf(n);return e===Object.prototype||e===null}function ra(n){return typeof n=="function"}function Bg(n){return ra(n)&&n.hasOwnProperty("\u0275cmp")}function jg(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var $g=!1;function zg(){return $g}function ud(n,e){return n===e}function qg(n,e,t){for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!0;return!1}function vd(n,e=ud,t=ud){let r=null,i=null,s;function a(){r=null,i=null}function c(p=void 0){s={result:p}}function h(){s=void 0}function d(){if(s!==void 0)return s.result;if(!r)return i=n.apply(null,arguments),r=arguments,i;if(!qg(arguments,r,e))return i;let p=n.apply(null,arguments);return r=arguments,t(i,p)?i:(i=p,p)}return{memoized:d,reset:a,setResult:c,clearResult:h}}function Ar(...n){return Kg(vd)(...n)}function Gg(n,e,t,r){if(t===void 0){let s=e.map(a=>a(n));return r.memoized.apply(null,s)}let i=e.map(s=>s(n,t));return r.memoized.apply(null,[...i,t])}function Kg(n,e={stateFn:Gg}){return function(...t){let r=t;if(Array.isArray(r[0])){let[p,...E]=r;r=[...p,...E]}else r.length===1&&Wg(r[0])&&(r=Hg(r[0]));let i=r.slice(0,r.length-1),s=r[r.length-1],a=i.filter(p=>p.release&&typeof p.release=="function"),c=n(function(...p){return s.apply(null,p)}),h=vd(function(p,E){return e.stateFn.apply(null,[p,i,E,c])});function d(){h.reset(),c.reset(),a.forEach(p=>p.release())}return Object.assign(h.memoized,{release:d,projector:c.memoized,setResult:h.setResult,clearResult:h.clearResult})}}function Ed(n){return Ar(e=>{let t=e[n];return!zg()&&Yo()&&!(n in e)&&console.warn(`@ngrx/store: The feature name "${n}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${n}', ...) or StoreModule.forFeature('${n}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),t},e=>e)}function Wg(n){return!!n&&typeof n=="object"&&Object.values(n).every(e=>typeof e=="function")}function Hg(n){let e=Object.values(n),t=Object.keys(n),r=(...i)=>t.reduce((s,a,c)=>Wt(Le({},s),{[a]:i[c]}),{});return[...e,r]}function Qg(n){return n instanceof G?ce(n):n}function Yg(n){return typeof n=="function"?n():n}function Jg(n,e){return n.concat(e)}function Xg(){if(ce(ua,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function Zg(n,e){return function(t,r){let i=e.action(r)?ia(r):r,s=n(t,i);return e.state()?ia(s):s}}function ia(n){Object.freeze(n);let e=ra(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&jg(n,t)&&(!e||t!=="caller"&&t!=="callee"&&t!=="arguments")){let r=n[t];(yd(r)||ra(r))&&!Object.isFrozen(r)&&ia(r)}}),n}function e_(n,e){return function(t,r){if(e.action(r)){let s=sa(r);cd(s,"action")}let i=n(t,r);if(e.state()){let s=sa(i);cd(s,"state")}return i}}function sa(n,e=[]){return(od(n)||ad(n))&&e.length===0?{path:["root"],value:n}:Object.keys(n).reduce((r,i)=>{if(r)return r;let s=n[i];return Bg(s)?r:od(s)||ad(s)||Mg(s)||Lg(s)||xg(s)||_d(s)?!1:Ug(s)?sa(s,[...e,i]):{path:[...e,i],value:s}},!1)}function cd(n,e){if(n===!1)return;let t=n.path.join("."),r=new Error(`Detected unserializable ${e} at "${t}". ${ca}#strict${e}serializability`);throw r.value=n.value,r.unserializablePath=t,r}function t_(n,e){return function(t,r){if(e.action(r)&&!ft.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${ca}#strictactionwithinngzone`);return n(t,r)}}function n_(n){return Yo()?Le({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},n):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function r_({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?e_(t,{action:r=>n&&!la(r),state:()=>e}):t}function i_({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?Zg(t,{action:r=>n&&!la(r),state:()=>e}):t}function la(n){return n.type.startsWith("@ngrx")}function s_({strictActionWithinNgZone:n}){return e=>n?t_(e,{action:t=>n&&!la(t)}):e}function o_(n){return[{provide:rd,useValue:n},{provide:nd,useFactory:u_,deps:[rd]},{provide:Ir,deps:[nd],useFactory:n_},{provide:Oi,multi:!0,deps:[Ir],useFactory:i_},{provide:Oi,multi:!0,deps:[Ir],useFactory:r_},{provide:Oi,multi:!0,deps:[Ir],useFactory:s_}]}function a_(){return[{provide:pd,multi:!0,deps:[Ir],useFactory:c_}]}function u_(n){return n}function c_(n){if(!n.strictActionTypeUniqueness)return;let e=Object.entries(ta).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${ca}#strictactiontypeuniqueness`)}function l_(n={},e={}){return[{provide:hd,useFactory:Xg},{provide:Jh,useValue:e.initialState},{provide:oa,useFactory:Yg,deps:[Jh]},{provide:ea,useValue:n},{provide:Zh,useExisting:n instanceof G?n:ea},{provide:fd,deps:[ea,[new $h(Zh)]],useFactory:Qg},{provide:ed,useValue:e.metaReducers?e.metaReducers:[]},{provide:td,deps:[Oi,ed],useFactory:Jg},{provide:Xh,useValue:e.reducerFactory?e.reducerFactory:Dg},{provide:dd,deps:[Xh,td],useFactory:gd},Ag,Rg,Pg,Ng,Og,o_(e.runtimeChecks),a_()]}function h_(){ce(Tn),ce(wr),ce(aa),ce(ua),ce(hd,{optional:!0}),ce(pd,{optional:!0})}var d_=[{provide:id,useFactory:h_},{provide:zh,multi:!0,useFactory(){return()=>ce(id)}}];function iT(n,e){return In([...l_(n,e),d_])}function sT(...n){let e=n.pop(),t=n.map(r=>r.type);return{reducer:e,types:t}}function oT(n,...e){let t=new Map;for(let r of e)for(let i of r.types){let s=t.get(i);if(s){let a=(c,h)=>r.reducer(s(c,h),h);t.set(i,a)}else t.set(i,r.reducer)}return function(r=n,i){let s=t.get(i.type);return s?s(r,i):r}}var wd=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},f_=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Td={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,p=s>>2,E=(s&3)<<4|c>>4,D=(c&15)<<2|d>>6,b=d&63;h||(b=64,a||(D=64)),r.push(t[p],t[E],t[D],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wd(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):f_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let E=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||E==null)throw new da;let D=s<<2|c>>4;if(r.push(D),d!==64){let b=c<<4&240|d>>2;if(r.push(b),E!==64){let P=d<<6&192|E;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},da=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},p_=function(n){let e=wd(n);return Td.encodeByteArray(e,!0)},Dr=function(n){return p_(n).replace(/\./g,"")},pa=function(n){try{return Td.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function m_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var g_=()=>m_().__FIREBASE_DEFAULTS__,__=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},y_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&pa(n[1]);return e&&JSON.parse(e)},Mi=()=>{try{return g_()||__()||y_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ma=n=>{var e,t;return(t=(e=Mi())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ad=n=>{let e=ma(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ga=()=>{var n;return(n=Mi())===null||n===void 0?void 0:n.config},_a=n=>{var e;return(e=Mi())===null||e===void 0?void 0:e[`_${n}`]};var Li=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Dd(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Dr(JSON.stringify(t)),Dr(JSON.stringify(a)),""].join(".")}function ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ye())}function v_(){var n;let e=(n=Mi())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bd(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Cd(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Rd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Pd(){let n=ye();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kd(){return!v_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ya(){try{return typeof indexedDB=="object"}catch{return!1}}function Nd(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var E_="FirebaseError",Me=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=E_,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pt.prototype.create)}},pt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?I_(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Me(i,c,r)}};function I_(n,e){return n.replace(w_,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var w_=/\{\$([^}]+)}/g;function Od(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(Id(s)&&Id(a)){if(!Yt(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Id(n){return n!==null&&typeof n=="object"}function An(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fd(n,e){let t=new fa(n,e);return t.subscribe.bind(t)}var fa=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");T_(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ha),i.error===void 0&&(i.error=ha),i.complete===void 0&&(i.complete=ha);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function T_(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ha(){}var cT=4*60*60*1e3;function ve(n){return n&&n._delegate?n._delegate:n}var qe=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Jt="[DEFAULT]";var va=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Li;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(D_(e))try{this.getOrInitializeService({instanceIdentifier:Jt})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Jt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Jt){return this.instances.has(e)}getOptions(e=Jt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:A_(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jt){return this.component?this.component.multipleInstances?e:Jt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function A_(n){return n===Jt?void 0:n}function D_(n){return n.instantiationMode==="EAGER"}var Vi=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new va(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var S_=[],j=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(j||{}),b_={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},C_=j.INFO,R_={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},P_=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=R_[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Nt=class{constructor(e){this.name=e,this._logLevel=C_,this._logHandler=P_,this._userLogHandler=null,S_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in j))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...e),this._logHandler(this,j.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...e),this._logHandler(this,j.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,j.INFO,...e),this._logHandler(this,j.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,j.WARN,...e),this._logHandler(this,j.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...e),this._logHandler(this,j.ERROR,...e)}};var k_=(n,e)=>e.some(t=>n instanceof t),xd,Ld;function N_(){return xd||(xd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O_(){return Ld||(Ld=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Md=new WeakMap,Ia=new WeakMap,Vd=new WeakMap,Ea=new WeakMap,Ta=new WeakMap;function F_(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Xe(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Md.set(t,n)}).catch(()=>{}),Ta.set(e,n),e}function x_(n){if(Ia.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Ia.set(n,e)}var wa={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ia.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Vd.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xe(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ud(n){wa=n(wa)}function L_(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ui(this),e,...t);return Vd.set(r,e.sort?e.sort():[e]),Xe(r)}:O_().includes(n)?function(...e){return n.apply(Ui(this),e),Xe(Md.get(this))}:function(...e){return Xe(n.apply(Ui(this),e))}}function M_(n){return typeof n=="function"?L_(n):(n instanceof IDBTransaction&&x_(n),k_(n,N_())?new Proxy(n,wa):n)}function Xe(n){if(n instanceof IDBRequest)return F_(n);if(Ea.has(n))return Ea.get(n);let e=M_(n);return e!==n&&(Ea.set(n,e),Ta.set(e,n)),e}var Ui=n=>Ta.get(n);function jd(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),c=Xe(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Xe(a.result),h.oldVersion,h.newVersion,Xe(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var V_=["get","getKey","getAll","getAllKeys","count"],U_=["put","add","delete","clear"],Aa=new Map;function Bd(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Aa.get(e))return Aa.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=U_.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||V_.includes(t)))return;let s=function(a,...c){return y(this,null,function*(){let h=this.transaction(a,i?"readwrite":"readonly"),d=h.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&h.done]))[0]})};return Aa.set(e,s),s}Ud(n=>Wt(Le({},n),{get:(e,t,r)=>Bd(e,t)||n.get(e,t,r),has:(e,t)=>!!Bd(e,t)||n.has(e,t)}));var Sa=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(B_(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function B_(n){let e=n.getComponent();return e?.type==="VERSION"}var ba="@firebase/app",$d="0.10.13";var mt=new Nt("@firebase/app"),j_="@firebase/app-compat",$_="@firebase/analytics-compat",z_="@firebase/analytics",q_="@firebase/app-check-compat",G_="@firebase/app-check",K_="@firebase/auth",W_="@firebase/auth-compat",H_="@firebase/database",Q_="@firebase/data-connect",Y_="@firebase/database-compat",J_="@firebase/functions",X_="@firebase/functions-compat",Z_="@firebase/installations",ey="@firebase/installations-compat",ty="@firebase/messaging",ny="@firebase/messaging-compat",ry="@firebase/performance",iy="@firebase/performance-compat",sy="@firebase/remote-config",oy="@firebase/remote-config-compat",ay="@firebase/storage",uy="@firebase/storage-compat",cy="@firebase/firestore",ly="@firebase/vertexai-preview",hy="@firebase/firestore-compat",dy="firebase",fy="10.14.1";var Ca="[DEFAULT]",py={[ba]:"fire-core",[j_]:"fire-core-compat",[z_]:"fire-analytics",[$_]:"fire-analytics-compat",[G_]:"fire-app-check",[q_]:"fire-app-check-compat",[K_]:"fire-auth",[W_]:"fire-auth-compat",[H_]:"fire-rtdb",[Q_]:"fire-data-connect",[Y_]:"fire-rtdb-compat",[J_]:"fire-fn",[X_]:"fire-fn-compat",[Z_]:"fire-iid",[ey]:"fire-iid-compat",[ty]:"fire-fcm",[ny]:"fire-fcm-compat",[ry]:"fire-perf",[iy]:"fire-perf-compat",[sy]:"fire-rc",[oy]:"fire-rc-compat",[ay]:"fire-gcs",[uy]:"fire-gcs-compat",[cy]:"fire-fst",[hy]:"fire-fst-compat",[ly]:"fire-vertex","fire-js":"fire-js",[dy]:"fire-js-all"};var Sr=new Map,my=new Map,Ra=new Map;function zd(n,e){try{n.container.addComponent(e)}catch(t){mt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ft(n){let e=n.name;if(Ra.has(e))return mt.debug(`There were multiple attempts to register component ${e}.`),!1;Ra.set(e,n);for(let t of Sr.values())zd(t,n);for(let t of my.values())zd(t,n);return!0}function Cr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ze(n){return n.settings!==void 0}var gy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ot=new pt("app","Firebase",gy);var Pa=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ot.create("app-deleted",{appName:this._name})}};var xt=fy;function Bi(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ca,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ot.create("bad-app-name",{appName:String(i)});if(t||(t=ga()),!t)throw Ot.create("no-options");let s=Sr.get(i);if(s){if(Yt(t,s.options)&&Yt(r,s.config))return s;throw Ot.create("duplicate-app",{appName:i})}let a=new Vi(i);for(let h of Ra.values())a.addComponent(h);let c=new Pa(t,r,a);return Sr.set(i,c),c}function Dn(n=Ca){let e=Sr.get(n);if(!e&&n===Ca&&ga())return Bi();if(!e)throw Ot.create("no-app",{appName:n});return e}function ji(){return Array.from(Sr.values())}function we(n,e,t){var r;let i=(r=py[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mt.warn(c.join(" "));return}Ft(new qe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var _y="firebase-heartbeat-database",yy=1,br="firebase-heartbeat-store",Da=null;function Wd(){return Da||(Da=jd(_y,yy,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(br)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ot.create("idb-open",{originalErrorMessage:n.message})})),Da}function vy(n){return y(this,null,function*(){try{let t=(yield Wd()).transaction(br),r=yield t.objectStore(br).get(Hd(n));return yield t.done,r}catch(e){if(e instanceof Me)mt.warn(e.message);else{let t=Ot.create("idb-get",{originalErrorMessage:e?.message});mt.warn(t.message)}}})}function qd(n,e){return y(this,null,function*(){try{let r=(yield Wd()).transaction(br,"readwrite");yield r.objectStore(br).put(e,Hd(n)),yield r.done}catch(t){if(t instanceof Me)mt.warn(t.message);else{let r=Ot.create("idb-set",{originalErrorMessage:t?.message});mt.warn(r.message)}}})}function Hd(n){return`${n.name}!${n.options.appId}`}var Ey=1024,Iy=30*24*60*60*1e3,ka=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Na(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Gd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=Iy}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mt.warn(r)}})}getHeartbeatsHeader(){return y(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Gd(),{heartbeatsToSend:r,unsentEntries:i}=wy(this._heartbeatsCache.heartbeats),s=Dr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return mt.warn(t),""}})}};function Gd(){return new Date().toISOString().substring(0,10)}function wy(n,e=Ey){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Kd(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Kd(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Na=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return ya()?Nd().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield vy(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return qd(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return qd(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Kd(n){return Dr(JSON.stringify({version:2,heartbeats:n})).length}function Ty(n){Ft(new qe("platform-logger",e=>new Sa(e),"PRIVATE")),Ft(new qe("heartbeat",e=>new ka(e),"PRIVATE")),we(ba,$d,n),we(ba,$d,"esm2017"),we("fire-js","")}Ty("");var Ay="firebase",Dy="10.14.1";we(Ay,Dy,"app");var Rr=new Qo("ANGULARFIRE2_VERSION");function Qd(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Fa=(n,e)=>{let t=e?[e]:ji(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},$i=class{constructor(){return Fa(Sy)}},Sy="app-check";function Sn(){}var zi=class{zone;delegate;constructor(e,t=Ci){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},Oa=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sn,{},Sn,Sn)),t.pipe(Bh({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},qi=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new zi(Zone.current)),this.insideAngular=t.run(()=>new zi(Zone.current,xh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(he(ft))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gi(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function by(n){return Gi().ngZone.runOutsideAngular(()=>n())}function Xt(n){return Gi().ngZone.run(()=>n())}function Cy(n){return Ry(Gi())(n)}function Ry(n){return function(t){return t=t.lift(new Oa(n.ngZone)),t.pipe(Bo(n.outsideAngular),vr(n.insideAngular))}}var Py=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Xt(()=>n.apply(void 0,r))},Ki=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Xt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sn,{},Sn,Sn))),r[s]=Py(r[s],t));let i=by(()=>n.apply(this,r));if(!e)if(i instanceof je){let s=Gi();return i.pipe(Bo(s.outsideAngular),vr(s.insideAngular))}else return Xt(()=>i);return i instanceof je?i.pipe(Cy):i instanceof Promise?Xt(()=>new Promise((s,a)=>i.then(c=>Xt(()=>s(c)),c=>Xt(()=>a(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Xt(()=>i)};var Zt=class{constructor(e){return e}},Pr=class{constructor(){return ji()}};function ky(n){return n&&n.length===1?n[0]:new Zt(Dn())}var xa=new G("angularfire2._apps"),Ny={provide:Zt,useFactory:ky,deps:[[new Ht,xa]]},Oy={provide:Pr,deps:[[new Ht,xa]]};function Fy(n){return(e,t)=>{let r=t.get(Ko);we("angularfire",Rr.full,"core"),we("angularfire",Rr.full,"app"),we("angular",Wh.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Zt(i)}}function QT(n,...e){return In([Ny,Oy,{provide:xa,useFactory:Fy(n),multi:!0,deps:[ft,wn,qi,...e]}])}function hf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var df=hf,ff=new pt("auth","Firebase",hf());var Xi=new Nt("@firebase/auth");function xy(n,...e){Xi.logLevel<=j.WARN&&Xi.warn(`Auth (${xt}): ${n}`,...e)}function Hi(n,...e){Xi.logLevel<=j.ERROR&&Xi.error(`Auth (${xt}): ${n}`,...e)}function tt(n,...e){throw Za(n,...e)}function Qe(n,...e){return Za(n,...e)}function Xa(n,e,t){let r=Object.assign(Object.assign({},df()),{[e]:t});return new pt("auth","Firebase",r).create(e,{appName:n.name})}function en(n){return Xa(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ly(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&tt(n,"argument-error"),Xa(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Za(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ff.create(n,...e)}function V(n,e,...t){if(!n)throw Za(e,...t)}function gt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Hi(e),new Error(e)}function yt(n,e){n||gt(e)}function Va(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function My(){return Yd()==="http:"||Yd()==="https:"}function Yd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Vy(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(My()||Cd()||"connection"in navigator)?navigator.onLine:!0}function Uy(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var tn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,yt(t>e,"Short delay should be less than long delay!"),this.isMobile=Sd()||Rd()}get(){return Vy()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function eu(n,e){yt(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Zi=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var By={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var jy=new tn(3e4,6e4);function tu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Rn(s,a,c,h){return y(this,arguments,function*(n,e,t,r,i={}){return pf(n,i,()=>y(this,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let E=An(Object.assign({key:n.config.apiKey},p)).slice(1),D=yield n._getAdditionalHeaders();D["Content-Type"]="application/json",n.languageCode&&(D["X-Firebase-Locale"]=n.languageCode);let b=Object.assign({method:e,headers:D},d);return bd()||(b.referrerPolicy="no-referrer"),Zi.fetch()(mf(n,n.config.apiHost,t,E),b)}))})}function pf(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},By),e);try{let i=new Ua(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Wi(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wi(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Wi(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw Wi(n,"user-disabled",a);let p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Xa(n,p,d);tt(n,p)}}catch(i){if(i instanceof Me)throw i;tt(n,"network-request-failed",{message:String(i)})}})}function $y(s,a,c,h){return y(this,arguments,function*(n,e,t,r,i={}){let d=yield Rn(n,e,t,r,i);return"mfaPendingCredential"in d&&tt(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function mf(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?eu(n.config,i):`${n.config.apiScheme}://${i}`}var Ua=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qe(this.auth,"network-request-failed")),jy.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Wi(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Qe(n,e,r);return i.customData._tokenResponse=t,i}function zy(n,e){return y(this,null,function*(){return Rn(n,"POST","/v1/accounts:delete",e)})}function gf(n,e){return y(this,null,function*(){return Rn(n,"POST","/v1/accounts:lookup",e)})}function kr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function nu(n,e=!1){return y(this,null,function*(){let t=ve(n),r=yield t.getIdToken(e),i=ru(r);V(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:kr(La(i.auth_time)),issuedAtTime:kr(La(i.iat)),expirationTime:kr(La(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function La(n){return Number(n)*1e3}function ru(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Hi("JWT malformed, contained fewer than 3 sections"),null;try{let i=pa(t);return i?JSON.parse(i):(Hi("Failed to decode base64 JWT payload"),null)}catch(i){return Hi("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Jd(n){let e=ru(n);return V(e,"internal-error"),V(typeof e.exp<"u","internal-error"),V(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Or(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Me&&qy(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function qy({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ba=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Fr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kr(this.lastLoginAt),this.creationTime=kr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function es(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Or(n,gf(t,{idToken:r}));V(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?_f(s.providerUserInfo):[],c=Gy(n.providerData,a),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,p=h?d:!1,E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Fr(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,E)})}function iu(n){return y(this,null,function*(){let e=ve(n);yield es(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Gy(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _f(n){return n.map(e=>{var{providerId:t}=e,r=Ri(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Ky(n,e){return y(this,null,function*(){let t=yield pf(n,{},()=>y(this,null,function*(){let r=An({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=mf(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Zi.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Wy(n,e){return y(this,null,function*(){return Rn(n,"POST","/v2/accounts:revokeToken",tu(n,e))})}var Nr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(typeof e.idToken<"u","internal-error"),V(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){V(e.length!==0,"internal-error");let t=Jd(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(V(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Ky(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(V(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(V(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(V(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return gt("not implemented")}};function Lt(n,e){V(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Cn=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Ri(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ba(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fr(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield Or(this,this.stsTokenManager.getToken(this.auth,e));return V(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return nu(this,e)}reload(){return iu(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield es(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(Ze(this.auth.app))return Promise.reject(en(this.auth));let e=yield this.getIdToken();return yield Or(this,zy(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,h,d,p;let E=(r=t.displayName)!==null&&r!==void 0?r:void 0,D=(i=t.email)!==null&&i!==void 0?i:void 0,b=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,P=(a=t.photoURL)!==null&&a!==void 0?a:void 0,O=(c=t.tenantId)!==null&&c!==void 0?c:void 0,N=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,z=(d=t.createdAt)!==null&&d!==void 0?d:void 0,q=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:K,emailVerified:re,isAnonymous:ke,providerData:X,stsTokenManager:I}=t;V(K&&I,e,"internal-error");let m=Nr.fromJSON(this.name,I);V(typeof K=="string",e,"internal-error"),Lt(E,e.name),Lt(D,e.name),V(typeof re=="boolean",e,"internal-error"),V(typeof ke=="boolean",e,"internal-error"),Lt(b,e.name),Lt(P,e.name),Lt(O,e.name),Lt(N,e.name),Lt(z,e.name),Lt(q,e.name);let _=new n({uid:K,auth:e,email:D,emailVerified:re,displayName:E,isAnonymous:ke,photoURL:P,phoneNumber:b,tenantId:O,stsTokenManager:m,createdAt:z,lastLoginAt:q});return X&&Array.isArray(X)&&(_.providerData=X.map(v=>Object.assign({},v))),N&&(_._redirectEventId=N),_}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new Nr;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield es(s),s})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];V(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?_f(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new Nr;c.updateFromIdToken(r);let h=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Fr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(h,d),h})}};var Xd=new Map;function _t(n){yt(n instanceof Function,"Expected a class definition");let e=Xd.get(n);return e?(yt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Xd.set(n,e),e)}var Hy=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ja=Hy;function Qi(n,e,t){return`firebase:${n}:${e}:${t}`}var ts=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Qi(this.userKey,i.apiKey,s),this.fullPersistenceKey=Qi("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Cn._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(_t(ja),e,r);let i=(yield Promise.all(t.map(d=>y(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||_t(ja),a=Qi(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let p=yield d._get(a);if(p){let E=Cn._fromJSON(e,p);d!==s&&(c=E),s=d;break}}catch{}let h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new n(s,e,r):(s=h[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(d=>y(this,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,e,r))})}};function Zd(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(If(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yf(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tf(e))return"Blackberry";if(Af(e))return"Webos";if(vf(e))return"Safari";if((e.includes("chrome/")||Ef(e))&&!e.includes("edge/"))return"Chrome";if(wf(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function yf(n=ye()){return/firefox\//i.test(n)}function vf(n=ye()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ef(n=ye()){return/crios\//i.test(n)}function If(n=ye()){return/iemobile/i.test(n)}function wf(n=ye()){return/android/i.test(n)}function Tf(n=ye()){return/blackberry/i.test(n)}function Af(n=ye()){return/webos/i.test(n)}function su(n=ye()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Qy(n=ye()){var e;return su(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Yy(){return Pd()&&document.documentMode===10}function Df(n=ye()){return su(n)||wf(n)||Af(n)||Tf(n)||/windows phone/i.test(n)||If(n)}function Sf(n,e=[]){let t;switch(n){case"Browser":t=Zd(ye());break;case"Worker":t=`${Zd(ye())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xt}/${r}`}var $a=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,c)=>{try{let h=e(s);a(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Jy(t){return y(this,arguments,function*(n,e={}){return Rn(n,"GET","/v2/passwordPolicy",tu(n,e))})}var Xy=6,za=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Xy,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;let h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var qa=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ns(this),this.idTokenSubscription=new ns(this),this.beforeStateQueue=new $a(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ff,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_t(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ts.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield gf(this,{idToken:e}),r=yield Cn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(Ze(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,h=yield this.tryRedirectSignIn(e);(!a||a===c)&&h?.user&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return V(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield es(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Uy()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(Ze(this.app))return Promise.reject(en(this));let t=e?ve(e):null;return t&&V(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&V(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return Ze(this.app)?Promise.reject(en(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ze(this.app)?Promise.reject(en(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(_t(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield Jy(this),t=new za(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Wy(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&_t(e)||this._popupRedirectResolver;V(t,this,"argument-error"),this.redirectPersistenceManager=yield ts.create(this,[_t(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(V(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{let h=e.addObserver(t);return()=>{a=!0,h()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&xy(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ls(n){return ve(n)}var ns=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fd(t=>this.observer=t)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ou={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zy(n){ou=n}function ev(n){return ou.loadJS(n)}function tv(){return ou.gapiScript}function bf(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function au(n,e){let t=Cr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Yt(s,e??{}))return i;tt(i,"already-initialized")}return t.initialize({options:e})}function nv(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(_t);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function uu(n,e,t){let r=ls(n);V(r._canInitEmulator,r,"emulator-config-failed"),V(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Cf(e),{host:a,port:c}=rv(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||iv()}function Cf(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function rv(n){let e=Cf(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:ef(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:ef(a)}}}function ef(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function iv(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var xr=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gt("not implemented")}_getIdTokenResponse(e){return gt("not implemented")}_linkToIdToken(e,t){return gt("not implemented")}_getReauthenticationResolver(e){return gt("not implemented")}};function bn(n,e){return y(this,null,function*(){return $y(n,"POST","/v1/accounts:signInWithIdp",tu(n,e))})}var sv="http://localhost",rs=class n extends xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Ri(t,["providerId","signInMethod"]);if(!r||!i)return null;let a=new n(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return bn(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,bn(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,bn(e,t)}buildRequest(){let e={requestUri:sv,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=An(t)}return e}};var Lr=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var is=class extends Lr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var hs=(()=>{class n extends is{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return rs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Mr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let s=yield Cn._fromIdTokenResponse(e,r,i),a=tf(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=tf(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function tf(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ga=class n extends Me{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Rf(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ga._fromErrorAndOperation(n,s,e,r):s})}function ov(n,e,t=!1){return y(this,null,function*(){let r=yield Or(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Mr._forOperation(n,"link",r)})}function av(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(Ze(r.app))return Promise.reject(en(r));let i="reauthenticate";try{let s=yield Or(n,Rf(r,i,e,n),t);V(s.idToken,r,"internal-error");let a=ru(s.idToken);V(a,r,"internal-error");let{sub:c}=a;return V(n.uid===c,r,"user-mismatch"),Mr._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&tt(r,"user-mismatch"),s}})}function uv(n,e,t=!1){return y(this,null,function*(){if(Ze(n.app))return Promise.reject(en(n));let r="signIn",i=yield Rf(n,r,e),s=yield Mr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function cu(n,e,t,r){return ve(n).onIdTokenChanged(e,t,r)}function lu(n,e,t){return ve(n).beforeAuthStateChanged(e,t)}function ds(n,e,t,r){return ve(n).onAuthStateChanged(e,t,r)}function fs(n){return ve(n).signOut()}var ss="__sak";var os=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ss,"1"),this.storage.removeItem(ss),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var cv=1e3,lv=10,hv=(()=>{class n extends os{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Df(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);Yy()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,lv):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},cv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield kt(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield kt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield kt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Pf=hv;var dv=(()=>{class n extends os{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),hu=dv;function fv(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var pv=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:s,data:a}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let h=Array.from(c).map(p=>y(this,null,function*(){return p(r.origin,a)})),d=yield fv(h);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function du(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Ka=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,h)=>{let d=du("",20);i.port1.start();let p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(E){let D=E;if(D.data.eventId===d)switch(D.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(D.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function et(){return window}function mv(n){et().location.href=n}function kf(){return typeof et().WorkerGlobalScope<"u"&&typeof et().importScripts=="function"}function gv(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function _v(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function yv(){return kf()?self:null}var Nf="firebaseLocalStorageDb",vv=1,as="firebaseLocalStorage",Of="fbase_key",nn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ps(n,e){return n.transaction([as],e?"readwrite":"readonly").objectStore(as)}function Ev(){let n=indexedDB.deleteDatabase(Nf);return new nn(n).toPromise()}function Wa(){let n=indexedDB.open(Nf,vv);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(as,{keyPath:Of})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(as)?e(r):(r.close(),yield Ev(),e(yield Wa()))}))})}function nf(n,e,t){return y(this,null,function*(){let r=ps(n,!0).put({[Of]:e,value:t});return new nn(r).toPromise()})}function Iv(n,e){return y(this,null,function*(){let t=ps(n,!1).get(e),r=yield new nn(t).toPromise();return r===void 0?null:r.value})}function rf(n,e){let t=ps(n,!0).delete(e);return new nn(t).toPromise()}var wv=800,Tv=3,Av=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield Wa(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Tv)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return kf()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=pv._getInstance(yv()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield gv(),!this.activeServiceWorker)return;this.sender=new Ka(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||_v()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Wa();return yield nf(t,ss,"1"),yield rf(t,ss),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>nf(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>Iv(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>rf(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(s=>{let a=ps(s,!1).getAll();return new nn(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),wv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Ff=Av;var sA=bf("rcb"),oA=new tn(3e4,6e4);function xf(n,e){return e?_t(e):(V(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Vr=class extends xr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bn(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Dv(n){return uv(n.auth,new Vr(n),n.bypassAuthState)}function Sv(n){let{auth:e,user:t}=n;return V(t,e,"internal-error"),av(t,new Vr(n),n.bypassAuthState)}function bv(n){return y(this,null,function*(){let{auth:e,user:t}=n;return V(t,e,"internal-error"),ov(t,new Vr(n),n.bypassAuthState)})}var us=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}let h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(h))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dv;case"linkViaPopup":case"linkViaRedirect":return bv;case"reauthViaPopup":case"reauthViaRedirect":return Sv;default:tt(this.auth,"internal-error")}}resolve(e){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Cv=new tn(2e3,1e4);function fu(n,e,t){return y(this,null,function*(){if(Ze(n.app))return Promise.reject(Qe(n,"operation-not-supported-in-this-environment"));let r=ls(n);Ly(n,e,Lr);let i=xf(r,t);return new Rv(r,"signInViaPopup",e,i).executeNotNull()})}var Rv=(()=>{class n extends us{constructor(t,r,i,s,a){super(t,r,s,a),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return y(this,null,function*(){let t=yield this.execute();return V(t,this.auth,"internal-error"),t})}onExecution(){return y(this,null,function*(){yt(this.filter.length===1,"Popup operations only handle one event");let t=du();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Qe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qe(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Cv.get())};t()}}n.currentPopupAction=null;return n})(),Pv="pendingRedirect",Yi=new Map,Ha=class n extends us{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Yi.get(this.auth._key());if(!e){try{let r=(yield kv(this.resolver,this.auth))?yield kt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yi.set(this.auth._key(),e)}return this.bypassAuthState||Yi.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return kt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,kt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function kv(n,e){return y(this,null,function*(){let t=Fv(e),r=Ov(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Nv(n,e){Yi.set(n._key(),e)}function Ov(n){return _t(n._redirectPersistence)}function Fv(n){return Qi(Pv,n.config.apiKey,n.name)}function xv(n,e,t=!1){return y(this,null,function*(){if(Ze(n.app))return Promise.reject(en(n));let r=ls(n),i=xf(r,e),a=yield new Ha(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var Lv=10*60*1e3,Qa=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mv(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Lf(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qe(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Lv&&this.cachedEventUids.clear(),this.cachedEventUids.has(sf(e))}saveEventToCache(e){this.cachedEventUids.add(sf(e)),this.lastProcessedEventTime=Date.now()}};function sf(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Lf({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Mv(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lf(n);default:return!1}}function Vv(t){return y(this,arguments,function*(n,e={}){return Rn(n,"GET","/v1/projects",e)})}var Uv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bv=/^https?/;function jv(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Vv(n);for(let t of e)try{if($v(t))return}catch{}tt(n,"unauthorized-domain")})}function $v(n){let e=Va(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Bv.test(t))return!1;if(Uv.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var zv=new tn(3e4,6e4);function of(){let n=et().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qv(n){return new Promise((e,t)=>{var r,i,s;function a(){of(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{of(),t(Qe(n,"network-request-failed"))},timeout:zv.get()})}if(!((i=(r=et().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=et().gapi)===null||s===void 0)&&s.load)a();else{let c=bf("iframefcb");return et()[c]=()=>{gapi.load?a():t(Qe(n,"network-request-failed"))},ev(`${tv()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Ji=null,e})}var Ji=null;function Gv(n){return Ji=Ji||qv(n),Ji}var Kv=new tn(5e3,15e3),Wv="__/auth/iframe",Hv="emulator/auth/iframe",Qv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jv(n){let e=n.config;V(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?eu(e,Hv):`https://${n.config.authDomain}/${Wv}`,r={apiKey:e.apiKey,appName:n.name,v:xt},i=Yv.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${An(r).slice(1)}`}function Xv(n){return y(this,null,function*(){let e=yield Gv(n),t=et().gapi;return V(t,n,"internal-error"),e.open({where:document.body,url:Jv(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qv,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Qe(n,"network-request-failed"),c=et().setTimeout(()=>{s(a)},Kv.get());function h(){et().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{s(a)})})))})}var Zv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eE=500,tE=600,nE="_blank",rE="http://localhost",cs=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function iE(n,e,t,r=eE,i=tE){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",h=Object.assign(Object.assign({},Zv),{width:r.toString(),height:i.toString(),top:s,left:a}),d=ye().toLowerCase();t&&(c=Ef(d)?nE:t),yf(d)&&(e=e||rE,h.scrollbars="yes");let p=Object.entries(h).reduce((D,[b,P])=>`${D}${b}=${P},`,"");if(Qy(d)&&c!=="_self")return sE(e||"",c),new cs(null);let E=window.open(e||"",c,p);V(E,n,"popup-blocked");try{E.focus()}catch{}return new cs(E)}function sE(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var oE="__/auth/handler",aE="emulator/auth/handler",uE=encodeURIComponent("fac");function af(n,e,t,r,i,s){return y(this,null,function*(){V(n.config.authDomain,n,"auth-domain-config-required"),V(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:xt,eventId:i};if(e instanceof Lr){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Od(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,E]of Object.entries(s||{}))a[p]=E}if(e instanceof is){let p=e.getScopes().filter(E=>E!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let p of Object.keys(c))c[p]===void 0&&delete c[p];let h=yield n._getAppCheckToken(),d=h?`#${uE}=${encodeURIComponent(h)}`:"";return`${cE(n)}?${An(c).slice(1)}${d}`})}function cE({config:n}){return n.emulator?eu(n,aE):`https://${n.authDomain}/${oE}`}var Ma="webStorageSupport",Ya=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hu,this._completeRedirectFn=xv,this._overrideRedirectResult=Nv}_openPopup(e,t,r,i){return y(this,null,function*(){var s;yt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield af(e,t,r,Va(),i);return iE(e,a,du())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield af(e,t,r,Va(),i);return mv(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(yt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield Xv(e),r=new Qa(e);return t.register("authEvent",i=>(V(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ma,{type:Ma},i=>{var s;let a=(s=i?.[0])===null||s===void 0?void 0:s[Ma];a!==void 0&&t(!!a),tt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jv(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Df()||vf()||su()}},Mf=Ya;var uf="@firebase/auth",cf="1.7.9";var Ja=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lE(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hE(n){Ft(new qe("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;V(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let h={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sf(n)},d=new qa(r,i,s,h);return nv(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ft(new qe("auth-internal",e=>{let t=ls(e.getProvider("auth").getImmediate());return(r=>new Ja(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),we(uf,cf,lE(n)),we(uf,cf,"esm2017")}var dE=5*60,fE=_a("authIdTokenMaxAge")||dE,lf=null,pE=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>fE)return;let i=t?.token;lf!==i&&(lf=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ur(n=Dn()){let e=Cr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=au(n,{popupRedirectResolver:Mf,persistence:[Ff,Pf,hu]}),r=_a("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=pE(s.toString());lu(t,a,()=>a(t.currentUser)),cu(t,c=>a(c))}}let i=ma("auth");return i&&uu(t,`http://${i}`),t}function mE(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Zy({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Qe("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",mE().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hE("Browser");var Vf="auth",vt=class{constructor(e){return e}},pu=class{constructor(){return Fa(Vf)}};var mu=new G("angularfire2.auth-instances");function oI(n,e){let t=Qd(Vf,n,e);return t&&new vt(t)}function aI(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new vt(r)}}var uI={provide:pu,deps:[[new Ht,mu]]},cI={provide:vt,useFactory:oI,deps:[[new Ht,mu],Zt]};function qA(n,...e){return we("angularfire",Rr.full,"auth"),In([cI,uI,{provide:mu,useFactory:aI(n),multi:!0,deps:[ft,wn,qi,Pr,[new Ht,$i],...e]}])}var GA=Ki(Ur,!0);var Uf=Ki(fu,!0);var Bf=class n{provider=new hs;auth=ce(vt);signIn(){return this.provider.setCustomParameters({prompt:"select_account"}),Uf(this.auth,this.provider).then(e=>{let r=hs.credentialFromResult(e)?.accessToken;return e.user.displayName||null}).catch(e=>{throw console.error("Error during sign-in:",e),e})}checkUserLogin(){return new je(e=>{ds(this.auth,t=>{t?(e.next(t.displayName),e.complete()):(e.next(null),e.complete())})})}signOut(){return new je(e=>{let t=Ur();fs(t).then(()=>{e.next(null),e.complete()}).catch(r=>{console.log("signedOut error"),e.error()})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wf=null;function gu(){return Wf}function xD(n){Wf??=n}var jf=class{};var Hf=new G(""),Qf=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ge({token:n,factory:()=>ce(lI),providedIn:"platform"})}}return n})();var lI=(()=>{class n extends Qf{constructor(){super(),this._doc=ce(Hf),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gu().getBaseHref(this._doc)}onPopState(t){let r=gu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=gu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ge({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Yf(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function $f(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function rn(n){return n&&n[0]!=="?"?"?"+n:n}var Tu=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ge({token:n,factory:()=>ce(dI),providedIn:"root"})}}return n})(),hI=new G(""),dI=(()=>{class n extends Tu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ce(Hf).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Yf(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+rn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let a=this.prepareExternalUrl(i+rn(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){let a=this.prepareExternalUrl(i+rn(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(he(Qf),he(hI,8))}}static{this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fI=(()=>{class n{constructor(t){this._subject=new Kh,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=gI($f(zf(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rn(r))}normalize(t){return n.stripTrailingSlash(mI(this._basePath,zf(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=rn}static{this.joinWithSlash=Yf}static{this.stripTrailingSlash=$f}static{this.\u0275fac=function(r){return new(r||n)(he(Tu))}}static{this.\u0275prov=ge({token:n,factory:()=>pI(),providedIn:"root"})}}return n})();function pI(){return new fI(he(Tu))}function mI(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function zf(n){return n.replace(/\/index.html$/,"")}function gI(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Fe=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Fe||{}),te=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(te||{}),Ve=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ve||{}),Mt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function _I(n){return $e(n)[de.LocaleId]}function yI(n,e,t){let r=$e(n),i=[r[de.DayPeriodsFormat],r[de.DayPeriodsStandalone]],s=Ge(i,e);return Ge(s,t)}function vI(n,e,t){let r=$e(n),i=[r[de.DaysFormat],r[de.DaysStandalone]],s=Ge(i,e);return Ge(s,t)}function EI(n,e,t){let r=$e(n),i=[r[de.MonthsFormat],r[de.MonthsStandalone]],s=Ge(i,e);return Ge(s,t)}function II(n,e){let r=$e(n)[de.Eras];return Ge(r,e)}function ms(n,e){let t=$e(n);return Ge(t[de.DateFormat],e)}function gs(n,e){let t=$e(n);return Ge(t[de.TimeFormat],e)}function _s(n,e){let r=$e(n)[de.DateTimeFormat];return Ge(r,e)}function As(n,e){let t=$e(n),r=t[de.NumberSymbols][e];if(typeof r>"u"){if(e===Mt.CurrencyDecimal)return t[de.NumberSymbols][Mt.Decimal];if(e===Mt.CurrencyGroup)return t[de.NumberSymbols][Mt.Group]}return r}function Jf(n){if(!n[de.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[de.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function wI(n){let e=$e(n);return Jf(e),(e[de.ExtraData][2]||[]).map(r=>typeof r=="string"?_u(r):[_u(r[0]),_u(r[1])])}function TI(n,e,t){let r=$e(n);Jf(r);let i=[r[de.ExtraData][0],r[de.ExtraData][1]],s=Ge(i,e)||[];return Ge(s,t)||[]}function Ge(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function _u(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var AI=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ys={},DI=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,It=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(It||{}),J=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(J||{}),Y=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Y||{});function SI(n,e,t,r){let i=xI(n);e=Et(t,e)||e;let a=[],c;for(;e;)if(c=DI.exec(e),c){a=a.concat(c.slice(1));let p=a.pop();if(!p)break;e=p}else{a.push(e);break}let h=i.getTimezoneOffset();r&&(h=Zf(r,h),i=FI(i,r,!0));let d="";return a.forEach(p=>{let E=NI(p);d+=E?E(i,t,h):p==="''"?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Ts(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Et(n,e){let t=_I(n);if(ys[t]??={},ys[t][e])return ys[t][e];let r="";switch(e){case"shortDate":r=ms(n,Ve.Short);break;case"mediumDate":r=ms(n,Ve.Medium);break;case"longDate":r=ms(n,Ve.Long);break;case"fullDate":r=ms(n,Ve.Full);break;case"shortTime":r=gs(n,Ve.Short);break;case"mediumTime":r=gs(n,Ve.Medium);break;case"longTime":r=gs(n,Ve.Long);break;case"fullTime":r=gs(n,Ve.Full);break;case"short":let i=Et(n,"shortTime"),s=Et(n,"shortDate");r=vs(_s(n,Ve.Short),[i,s]);break;case"medium":let a=Et(n,"mediumTime"),c=Et(n,"mediumDate");r=vs(_s(n,Ve.Medium),[a,c]);break;case"long":let h=Et(n,"longTime"),d=Et(n,"longDate");r=vs(_s(n,Ve.Long),[h,d]);break;case"full":let p=Et(n,"fullTime"),E=Et(n,"fullDate");r=vs(_s(n,Ve.Full),[p,E]);break}return r&&(ys[t][e]=r),r}function vs(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Ye(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let a=String(n);for(;a.length<e;)a="0"+a;return r&&(a=a.slice(a.length-e)),s+a}function bI(n,e){return Ye(n,3).substring(0,e)}function fe(n,e,t=0,r=!1,i=!1){return function(s,a){let c=CI(n,s);if((t>0||c>-t)&&(c+=t),n===J.Hours)c===0&&t===-12&&(c=12);else if(n===J.FractionalSeconds)return bI(c,e);let h=As(a,Mt.MinusSign);return Ye(c,e,h,r,i)}}function CI(n,e){switch(n){case J.FullYear:return e.getFullYear();case J.Month:return e.getMonth();case J.Date:return e.getDate();case J.Hours:return e.getHours();case J.Minutes:return e.getMinutes();case J.Seconds:return e.getSeconds();case J.FractionalSeconds:return e.getMilliseconds();case J.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function ne(n,e,t=Fe.Format,r=!1){return function(i,s){return RI(i,s,n,e,t,r)}}function RI(n,e,t,r,i,s){switch(t){case Y.Months:return EI(e,i,r)[n.getMonth()];case Y.Days:return vI(e,i,r)[n.getDay()];case Y.DayPeriods:let a=n.getHours(),c=n.getMinutes();if(s){let d=wI(e),p=TI(e,i,r),E=d.findIndex(D=>{if(Array.isArray(D)){let[b,P]=D,O=a>=b.hours&&c>=b.minutes,N=a<P.hours||a===P.hours&&c<P.minutes;if(b.hours<P.hours){if(O&&N)return!0}else if(O||N)return!0}else if(D.hours===a&&D.minutes===c)return!0;return!1});if(E!==-1)return p[E]}return yI(e,i,r)[a<12?0:1];case Y.Eras:return II(e,r)[n.getFullYear()<=0?0:1];default:let h=t;throw new Error(`unexpected translation type ${h}`)}}function Es(n){return function(e,t,r){let i=-1*r,s=As(t,Mt.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case It.Short:return(i>=0?"+":"")+Ye(a,2,s)+Ye(Math.abs(i%60),2,s);case It.ShortGMT:return"GMT"+(i>=0?"+":"")+Ye(a,1,s);case It.Long:return"GMT"+(i>=0?"+":"")+Ye(a,2,s)+":"+Ye(Math.abs(i%60),2,s);case It.Extended:return r===0?"Z":(i>=0?"+":"")+Ye(a,2,s)+":"+Ye(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var PI=0,ws=4;function kI(n){let e=Ts(n,PI,1).getDay();return Ts(n,0,1+(e<=ws?ws:ws+7)-e)}function Xf(n){let e=n.getDay(),t=e===0?-3:ws-e;return Ts(n.getFullYear(),n.getMonth(),n.getDate()+t)}function yu(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();i=1+Math.floor((a+s)/7)}else{let s=Xf(t),a=kI(s.getFullYear()),c=s.getTime()-a.getTime();i=1+Math.round(c/6048e5)}return Ye(i,n,As(r,Mt.MinusSign))}}function Is(n,e=!1){return function(t,r){let s=Xf(t).getFullYear();return Ye(s,n,As(r,Mt.MinusSign),e)}}var vu={};function NI(n){if(vu[n])return vu[n];let e;switch(n){case"G":case"GG":case"GGG":e=ne(Y.Eras,te.Abbreviated);break;case"GGGG":e=ne(Y.Eras,te.Wide);break;case"GGGGG":e=ne(Y.Eras,te.Narrow);break;case"y":e=fe(J.FullYear,1,0,!1,!0);break;case"yy":e=fe(J.FullYear,2,0,!0,!0);break;case"yyy":e=fe(J.FullYear,3,0,!1,!0);break;case"yyyy":e=fe(J.FullYear,4,0,!1,!0);break;case"Y":e=Is(1);break;case"YY":e=Is(2,!0);break;case"YYY":e=Is(3);break;case"YYYY":e=Is(4);break;case"M":case"L":e=fe(J.Month,1,1);break;case"MM":case"LL":e=fe(J.Month,2,1);break;case"MMM":e=ne(Y.Months,te.Abbreviated);break;case"MMMM":e=ne(Y.Months,te.Wide);break;case"MMMMM":e=ne(Y.Months,te.Narrow);break;case"LLL":e=ne(Y.Months,te.Abbreviated,Fe.Standalone);break;case"LLLL":e=ne(Y.Months,te.Wide,Fe.Standalone);break;case"LLLLL":e=ne(Y.Months,te.Narrow,Fe.Standalone);break;case"w":e=yu(1);break;case"ww":e=yu(2);break;case"W":e=yu(1,!0);break;case"d":e=fe(J.Date,1);break;case"dd":e=fe(J.Date,2);break;case"c":case"cc":e=fe(J.Day,1);break;case"ccc":e=ne(Y.Days,te.Abbreviated,Fe.Standalone);break;case"cccc":e=ne(Y.Days,te.Wide,Fe.Standalone);break;case"ccccc":e=ne(Y.Days,te.Narrow,Fe.Standalone);break;case"cccccc":e=ne(Y.Days,te.Short,Fe.Standalone);break;case"E":case"EE":case"EEE":e=ne(Y.Days,te.Abbreviated);break;case"EEEE":e=ne(Y.Days,te.Wide);break;case"EEEEE":e=ne(Y.Days,te.Narrow);break;case"EEEEEE":e=ne(Y.Days,te.Short);break;case"a":case"aa":case"aaa":e=ne(Y.DayPeriods,te.Abbreviated);break;case"aaaa":e=ne(Y.DayPeriods,te.Wide);break;case"aaaaa":e=ne(Y.DayPeriods,te.Narrow);break;case"b":case"bb":case"bbb":e=ne(Y.DayPeriods,te.Abbreviated,Fe.Standalone,!0);break;case"bbbb":e=ne(Y.DayPeriods,te.Wide,Fe.Standalone,!0);break;case"bbbbb":e=ne(Y.DayPeriods,te.Narrow,Fe.Standalone,!0);break;case"B":case"BB":case"BBB":e=ne(Y.DayPeriods,te.Abbreviated,Fe.Format,!0);break;case"BBBB":e=ne(Y.DayPeriods,te.Wide,Fe.Format,!0);break;case"BBBBB":e=ne(Y.DayPeriods,te.Narrow,Fe.Format,!0);break;case"h":e=fe(J.Hours,1,-12);break;case"hh":e=fe(J.Hours,2,-12);break;case"H":e=fe(J.Hours,1);break;case"HH":e=fe(J.Hours,2);break;case"m":e=fe(J.Minutes,1);break;case"mm":e=fe(J.Minutes,2);break;case"s":e=fe(J.Seconds,1);break;case"ss":e=fe(J.Seconds,2);break;case"S":e=fe(J.FractionalSeconds,1);break;case"SS":e=fe(J.FractionalSeconds,2);break;case"SSS":e=fe(J.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Es(It.Short);break;case"ZZZZZ":e=Es(It.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Es(It.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Es(It.Long);break;default:return null}return vu[n]=e,e}function Zf(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function OI(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function FI(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=Zf(e,i);return OI(n,r*(s-i))}function xI(n){if(qf(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,a=1]=n.split("-").map(c=>+c);return Ts(i,s-1,a)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(AI))return LI(r)}let e=new Date(n);if(!qf(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function LI(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let a=Number(n[4]||0)-t,c=Number(n[5]||0)-r,h=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,a,c,h,d),e}function qf(n){return n instanceof Date&&!isNaN(n.valueOf())}function LD(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Eu=/\s+/,Gf=[],MD=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=Gf,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Eu):Gf}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Eu):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Eu).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Qt(Go),Qt(Wo))}}static{this.\u0275dir=Pi({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();function ep(n,e){return new Er(2100,!1)}var Iu=class{createSubscription(e,t){return Ni(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Ni(()=>e.unsubscribe())}},wu=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},MI=new wu,VI=new Iu,VD=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Hh(t))return MI;if(Qh(t))return VI;throw ep(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Qt(Jo,16))}}static{this.\u0275pipe=zo({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var UI="mediumDate",BI=new G(""),jI=new G(""),UD=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let a=r??this.defaultOptions?.dateFormat??UI,c=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return SI(t,a,s||this.locale,c)}catch(a){throw ep(n,a.message)}}static{this.\u0275fac=function(r){return new(r||n)(Qt(Yh,16),Qt(BI,24),Qt(jI,24))}}static{this.\u0275pipe=zo({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var BD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$o({type:n})}static{this.\u0275inj=jo({})}}return n})(),jD="browser",$I="server";function $D(n){return n===$I}var Kf=class{};var KD=le("[check login] Check Login"),WD=le("[check login] Check Login Success",ze()),HD=le("[login] User Login"),QD=le("[login] User Login Success",ze()),YD=le("[login] User Login Failure",ze()),JD=le("[logOut] Log Out"),XD=le("[logOut] Log Out Success",ze()),ZD=le("[Get Tasks] Get Tasks"),eS=le("[Get Tasks] Get Tasks Success",ze()),tS=le("[Get Tasks] Get Tasks Failure",ze()),nS=le("[Qurent Task ] Get Qurent Task",ze()),rS=le("[Qurent Task ] Get Qurent Task Success",ze()),iS=le("[Clear Curent Task] Clear Curent Task"),sS=le("[Clear Curent Task] Clear Curent Task Success"),oS=le("[Add Task] Add Task",ze()),aS=le("[Add Task] Add Task Success"),uS=le("[Delete Task] Delete Task",ze()),cS=le("[Delete Task] Delete Task Success"),lS=le("[Update Task] Update Task",ze()),hS=le("[Update Task] Update Task Success");var tp={apiKey:"AIzaSyAtvWNL0SosEH5IfXqCTjrmC_iwx_v600s",authDomain:"todo-13c71.firebaseapp.com",projectId:"todo-13c71",storageBucket:"todo-13c71.firebasestorage.app",messagingSenderId:"196363664197",appId:"1:196363664197:web:50e211c42bdfca6ea21c2c",measurementId:"G-WZB3CC6QKC"};var np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rp={};var Vt,Au;(function(){var n;function e(I,m){function _(){}_.prototype=m.prototype,I.D=m.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(v,w,A){for(var g=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)g[lt-2]=arguments[lt];return m.prototype[w].apply(v,g)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,m,_){_||(_=0);var v=Array(16);if(typeof m=="string")for(var w=0;16>w;++w)v[w]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(w=0;16>w;++w)v[w]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=I.g[0],_=I.g[1],w=I.g[2];var A=I.g[3],g=m+(A^_&(w^A))+v[0]+3614090360&4294967295;m=_+(g<<7&4294967295|g>>>25),g=A+(w^m&(_^w))+v[1]+3905402710&4294967295,A=m+(g<<12&4294967295|g>>>20),g=w+(_^A&(m^_))+v[2]+606105819&4294967295,w=A+(g<<17&4294967295|g>>>15),g=_+(m^w&(A^m))+v[3]+3250441966&4294967295,_=w+(g<<22&4294967295|g>>>10),g=m+(A^_&(w^A))+v[4]+4118548399&4294967295,m=_+(g<<7&4294967295|g>>>25),g=A+(w^m&(_^w))+v[5]+1200080426&4294967295,A=m+(g<<12&4294967295|g>>>20),g=w+(_^A&(m^_))+v[6]+2821735955&4294967295,w=A+(g<<17&4294967295|g>>>15),g=_+(m^w&(A^m))+v[7]+4249261313&4294967295,_=w+(g<<22&4294967295|g>>>10),g=m+(A^_&(w^A))+v[8]+1770035416&4294967295,m=_+(g<<7&4294967295|g>>>25),g=A+(w^m&(_^w))+v[9]+2336552879&4294967295,A=m+(g<<12&4294967295|g>>>20),g=w+(_^A&(m^_))+v[10]+4294925233&4294967295,w=A+(g<<17&4294967295|g>>>15),g=_+(m^w&(A^m))+v[11]+2304563134&4294967295,_=w+(g<<22&4294967295|g>>>10),g=m+(A^_&(w^A))+v[12]+1804603682&4294967295,m=_+(g<<7&4294967295|g>>>25),g=A+(w^m&(_^w))+v[13]+4254626195&4294967295,A=m+(g<<12&4294967295|g>>>20),g=w+(_^A&(m^_))+v[14]+2792965006&4294967295,w=A+(g<<17&4294967295|g>>>15),g=_+(m^w&(A^m))+v[15]+1236535329&4294967295,_=w+(g<<22&4294967295|g>>>10),g=m+(w^A&(_^w))+v[1]+4129170786&4294967295,m=_+(g<<5&4294967295|g>>>27),g=A+(_^w&(m^_))+v[6]+3225465664&4294967295,A=m+(g<<9&4294967295|g>>>23),g=w+(m^_&(A^m))+v[11]+643717713&4294967295,w=A+(g<<14&4294967295|g>>>18),g=_+(A^m&(w^A))+v[0]+3921069994&4294967295,_=w+(g<<20&4294967295|g>>>12),g=m+(w^A&(_^w))+v[5]+3593408605&4294967295,m=_+(g<<5&4294967295|g>>>27),g=A+(_^w&(m^_))+v[10]+38016083&4294967295,A=m+(g<<9&4294967295|g>>>23),g=w+(m^_&(A^m))+v[15]+3634488961&4294967295,w=A+(g<<14&4294967295|g>>>18),g=_+(A^m&(w^A))+v[4]+3889429448&4294967295,_=w+(g<<20&4294967295|g>>>12),g=m+(w^A&(_^w))+v[9]+568446438&4294967295,m=_+(g<<5&4294967295|g>>>27),g=A+(_^w&(m^_))+v[14]+3275163606&4294967295,A=m+(g<<9&4294967295|g>>>23),g=w+(m^_&(A^m))+v[3]+4107603335&4294967295,w=A+(g<<14&4294967295|g>>>18),g=_+(A^m&(w^A))+v[8]+1163531501&4294967295,_=w+(g<<20&4294967295|g>>>12),g=m+(w^A&(_^w))+v[13]+2850285829&4294967295,m=_+(g<<5&4294967295|g>>>27),g=A+(_^w&(m^_))+v[2]+4243563512&4294967295,A=m+(g<<9&4294967295|g>>>23),g=w+(m^_&(A^m))+v[7]+1735328473&4294967295,w=A+(g<<14&4294967295|g>>>18),g=_+(A^m&(w^A))+v[12]+2368359562&4294967295,_=w+(g<<20&4294967295|g>>>12),g=m+(_^w^A)+v[5]+4294588738&4294967295,m=_+(g<<4&4294967295|g>>>28),g=A+(m^_^w)+v[8]+2272392833&4294967295,A=m+(g<<11&4294967295|g>>>21),g=w+(A^m^_)+v[11]+1839030562&4294967295,w=A+(g<<16&4294967295|g>>>16),g=_+(w^A^m)+v[14]+4259657740&4294967295,_=w+(g<<23&4294967295|g>>>9),g=m+(_^w^A)+v[1]+2763975236&4294967295,m=_+(g<<4&4294967295|g>>>28),g=A+(m^_^w)+v[4]+1272893353&4294967295,A=m+(g<<11&4294967295|g>>>21),g=w+(A^m^_)+v[7]+4139469664&4294967295,w=A+(g<<16&4294967295|g>>>16),g=_+(w^A^m)+v[10]+3200236656&4294967295,_=w+(g<<23&4294967295|g>>>9),g=m+(_^w^A)+v[13]+681279174&4294967295,m=_+(g<<4&4294967295|g>>>28),g=A+(m^_^w)+v[0]+3936430074&4294967295,A=m+(g<<11&4294967295|g>>>21),g=w+(A^m^_)+v[3]+3572445317&4294967295,w=A+(g<<16&4294967295|g>>>16),g=_+(w^A^m)+v[6]+76029189&4294967295,_=w+(g<<23&4294967295|g>>>9),g=m+(_^w^A)+v[9]+3654602809&4294967295,m=_+(g<<4&4294967295|g>>>28),g=A+(m^_^w)+v[12]+3873151461&4294967295,A=m+(g<<11&4294967295|g>>>21),g=w+(A^m^_)+v[15]+530742520&4294967295,w=A+(g<<16&4294967295|g>>>16),g=_+(w^A^m)+v[2]+3299628645&4294967295,_=w+(g<<23&4294967295|g>>>9),g=m+(w^(_|~A))+v[0]+4096336452&4294967295,m=_+(g<<6&4294967295|g>>>26),g=A+(_^(m|~w))+v[7]+1126891415&4294967295,A=m+(g<<10&4294967295|g>>>22),g=w+(m^(A|~_))+v[14]+2878612391&4294967295,w=A+(g<<15&4294967295|g>>>17),g=_+(A^(w|~m))+v[5]+4237533241&4294967295,_=w+(g<<21&4294967295|g>>>11),g=m+(w^(_|~A))+v[12]+1700485571&4294967295,m=_+(g<<6&4294967295|g>>>26),g=A+(_^(m|~w))+v[3]+2399980690&4294967295,A=m+(g<<10&4294967295|g>>>22),g=w+(m^(A|~_))+v[10]+4293915773&4294967295,w=A+(g<<15&4294967295|g>>>17),g=_+(A^(w|~m))+v[1]+2240044497&4294967295,_=w+(g<<21&4294967295|g>>>11),g=m+(w^(_|~A))+v[8]+1873313359&4294967295,m=_+(g<<6&4294967295|g>>>26),g=A+(_^(m|~w))+v[15]+4264355552&4294967295,A=m+(g<<10&4294967295|g>>>22),g=w+(m^(A|~_))+v[6]+2734768916&4294967295,w=A+(g<<15&4294967295|g>>>17),g=_+(A^(w|~m))+v[13]+1309151649&4294967295,_=w+(g<<21&4294967295|g>>>11),g=m+(w^(_|~A))+v[4]+4149444226&4294967295,m=_+(g<<6&4294967295|g>>>26),g=A+(_^(m|~w))+v[11]+3174756917&4294967295,A=m+(g<<10&4294967295|g>>>22),g=w+(m^(A|~_))+v[2]+718787259&4294967295,w=A+(g<<15&4294967295|g>>>17),g=_+(A^(w|~m))+v[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(w+(g<<21&4294967295|g>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,m){m===void 0&&(m=I.length);for(var _=m-this.blockSize,v=this.B,w=this.h,A=0;A<m;){if(w==0)for(;A<=_;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<m;)if(v[w++]=I.charCodeAt(A++),w==this.blockSize){i(this,v),w=0;break}}else for(;A<m;)if(v[w++]=I[A++],w==this.blockSize){i(this,v),w=0;break}}this.h=w,this.o+=m},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;var _=8*this.o;for(m=I.length-8;m<I.length;++m)I[m]=_&255,_/=256;for(this.u(I),I=Array(16),m=_=0;4>m;++m)for(var v=0;32>v;v+=8)I[_++]=this.g[m]>>>v&255;return I};function s(I,m){var _=c;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=m(I)}function a(I,m){this.h=m;for(var _=[],v=!0,w=I.length-1;0<=w;w--){var A=I[w]|0;v&&A==m||(_[w]=A,v=!1)}this.g=_}var c={};function h(I){return-128<=I&&128>I?s(I,function(m){return new a([m|0],0>m?-1:0)}):new a([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return E;if(0>I)return N(d(-I));for(var m=[],_=1,v=0;I>=_;v++)m[v]=I/_|0,_*=4294967296;return new a(m,0)}function p(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return N(p(I.substring(1),m));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(m,8)),v=E,w=0;w<I.length;w+=8){var A=Math.min(8,I.length-w),g=parseInt(I.substring(w,w+A),m);8>A?(A=d(Math.pow(m,A)),v=v.j(A).add(d(g))):(v=v.j(_),v=v.add(d(g)))}return v}var E=h(0),D=h(1),b=h(16777216);n=a.prototype,n.m=function(){if(O(this))return-N(this).m();for(var I=0,m=1,_=0;_<this.g.length;_++){var v=this.i(_);I+=(0<=v?v:4294967296+v)*m,m*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P(this))return"0";if(O(this))return"-"+N(this).toString(I);for(var m=d(Math.pow(I,6)),_=this,v="";;){var w=re(_,m).g;_=z(_,w.j(m));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=w,P(_))return A+v;for(;6>A.length;)A="0"+A;v=A+v}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function P(I){if(I.h!=0)return!1;for(var m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function O(I){return I.h==-1}n.l=function(I){return I=z(this,I),O(I)?-1:P(I)?0:1};function N(I){for(var m=I.g.length,_=[],v=0;v<m;v++)_[v]=~I.g[v];return new a(_,~I.h).add(D)}n.abs=function(){return O(this)?N(this):this},n.add=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],v=0,w=0;w<=m;w++){var A=v+(this.i(w)&65535)+(I.i(w)&65535),g=(A>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);v=g>>>16,A&=65535,g&=65535,_[w]=g<<16|A}return new a(_,_[_.length-1]&-2147483648?-1:0)};function z(I,m){return I.add(N(m))}n.j=function(I){if(P(this)||P(I))return E;if(O(this))return O(I)?N(this).j(N(I)):N(N(this).j(I));if(O(I))return N(this.j(N(I)));if(0>this.l(b)&&0>I.l(b))return d(this.m()*I.m());for(var m=this.g.length+I.g.length,_=[],v=0;v<2*m;v++)_[v]=0;for(v=0;v<this.g.length;v++)for(var w=0;w<I.g.length;w++){var A=this.i(v)>>>16,g=this.i(v)&65535,lt=I.i(w)>>>16,er=I.i(w)&65535;_[2*v+2*w]+=g*er,q(_,2*v+2*w),_[2*v+2*w+1]+=A*er,q(_,2*v+2*w+1),_[2*v+2*w+1]+=g*lt,q(_,2*v+2*w+1),_[2*v+2*w+2]+=A*lt,q(_,2*v+2*w+2)}for(v=0;v<m;v++)_[v]=_[2*v+1]<<16|_[2*v];for(v=m;v<2*m;v++)_[v]=0;return new a(_,0)};function q(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function K(I,m){this.g=I,this.h=m}function re(I,m){if(P(m))throw Error("division by zero");if(P(I))return new K(E,E);if(O(I))return m=re(N(I),m),new K(N(m.g),N(m.h));if(O(m))return m=re(I,N(m)),new K(N(m.g),m.h);if(30<I.g.length){if(O(I)||O(m))throw Error("slowDivide_ only works with positive integers.");for(var _=D,v=m;0>=v.l(I);)_=ke(_),v=ke(v);var w=X(_,1),A=X(v,1);for(v=X(v,2),_=X(_,2);!P(v);){var g=A.add(v);0>=g.l(I)&&(w=w.add(_),A=g),v=X(v,1),_=X(_,1)}return m=z(I,w.j(m)),new K(w,m)}for(w=E;0<=I.l(m);){for(_=Math.max(1,Math.floor(I.m()/m.m())),v=Math.ceil(Math.log(_)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),A=d(_),g=A.j(m);O(g)||0<g.l(I);)_-=v,A=d(_),g=A.j(m);P(A)&&(A=D),w=w.add(A),I=z(I,g)}return new K(w,I)}n.A=function(I){return re(this,I).h},n.and=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],v=0;v<m;v++)_[v]=this.i(v)&I.i(v);return new a(_,this.h&I.h)},n.or=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],v=0;v<m;v++)_[v]=this.i(v)|I.i(v);return new a(_,this.h|I.h)},n.xor=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],v=0;v<m;v++)_[v]=this.i(v)^I.i(v);return new a(_,this.h^I.h)};function ke(I){for(var m=I.g.length+1,_=[],v=0;v<m;v++)_[v]=I.i(v)<<1|I.i(v-1)>>>31;return new a(_,I.h)}function X(I,m){var _=m>>5;m%=32;for(var v=I.g.length-_,w=[],A=0;A<v;A++)w[A]=0<m?I.i(A+_)>>>m|I.i(A+_+1)<<32-m:I.i(A+_);return new a(w,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Au=rp.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Vt=rp.Integer=a}).apply(typeof np<"u"?np:typeof self<"u"?self:typeof window<"u"?window:{});var Ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wt={};var Du,zI,Pn,Su,Br,Ss,bu,Cu,Ru;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,l){return o==Array.prototype||o==Object.prototype||(o[u]=l.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ds=="object"&&Ds];for(var u=0;u<o.length;++u){var l=o[u];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var l=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var T=o[f];if(!(T in l))break e;l=l[T]}o=o[o.length-1],f=l[o],u=u(f),u!=f&&u!=null&&e(l,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var l=0,f=!1,T={next:function(){if(!f&&l<o.length){var S=l++;return{value:u(S,o[S]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,l){return l})}});var a=a||{},c=this||self;function h(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function d(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function p(o,u,l){return o.call.apply(o.bind,arguments)}function E(o,u,l){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),o.apply(u,T)}}return function(){return o.apply(u,arguments)}}function D(o,u,l){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:E,D.apply(null,arguments)}function b(o,u){var l=Array.prototype.slice.call(arguments,1);return function(){var f=l.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function P(o,u){function l(){}l.prototype=u.prototype,o.aa=u.prototype,o.prototype=new l,o.prototype.constructor=o,o.Qb=function(f,T,S){for(var k=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)k[ee-2]=arguments[ee];return u.prototype[T].apply(f,k)}}function O(o){let u=o.length;if(0<u){let l=Array(u);for(let f=0;f<u;f++)l[f]=o[f];return l}return[]}function N(o,u){for(let l=1;l<arguments.length;l++){let f=arguments[l];if(h(f)){let T=o.length||0,S=f.length||0;o.length=T+S;for(let k=0;k<S;k++)o[T+k]=f[k]}else o.push(f)}}class z{constructor(u,l){this.i=u,this.j=l,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function q(o){return/^[\s\xa0]*$/.test(o)}function K(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function re(o){return re[" "](o),o}re[" "]=function(){};var ke=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function X(o,u,l){for(let f in o)u.call(l,o[f],f,o)}function I(o,u){for(let l in o)u.call(void 0,o[l],l,o)}function m(o){let u={};for(let l in o)u[l]=o[l];return u}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,u){let l,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(l in f)o[l]=f[l];for(let S=0;S<_.length;S++)l=_[S],Object.prototype.hasOwnProperty.call(f,l)&&(o[l]=f[l])}}function w(o){var u=1;o=o.split(":");let l=[];for(;0<u&&o.length;)l.push(o.shift()),u--;return o.length&&l.push(o.join(":")),l}function A(o){c.setTimeout(()=>{throw o},0)}function g(){var o=mo;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class lt{constructor(){this.h=this.g=null}add(u,l){let f=er.get();f.set(u,l),this.h?this.h.next=f:this.g=f,this.h=f}}var er=new z(()=>new zm,o=>o.reset());class zm{constructor(){this.next=this.g=this.h=null}set(u,l){this.h=u,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let tr,nr=!1,mo=new lt,Fl=()=>{let o=c.Promise.resolve(void 0);tr=()=>{o.then(qm)}};var qm=()=>{for(var o;o=g();){try{o.h.call(o.g)}catch(l){A(l)}var u=er;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}nr=!1};function bt(){this.s=this.s,this.C=this.C}bt.prototype.s=!1,bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Gm=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let l=()=>{};c.addEventListener("test",l,u),c.removeEventListener("test",l,u)}catch{}return o}();function rr(o,u){if(Ae.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var l=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(ke){e:{try{re(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else l=="mouseover"?u=o.fromElement:l=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Km[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&rr.aa.h.call(this)}}P(rr,Ae);var Km={2:"touch",3:"pen",4:"mouse"};rr.prototype.h=function(){rr.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),Wm=0;function Hm(o,u,l,f,T){this.listener=o,this.proxy=null,this.src=u,this.type=l,this.capture=!!f,this.ha=T,this.key=++Wm,this.da=this.fa=!1}function ci(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function li(o){this.src=o,this.g={},this.h=0}li.prototype.add=function(o,u,l,f,T){var S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);var k=_o(o,u,f,T);return-1<k?(u=o[k],l||(u.fa=!1)):(u=new Hm(u,this.src,S,!!f,T),u.fa=l,o.push(u)),u};function go(o,u){var l=u.type;if(l in o.g){var f=o.g[l],T=Array.prototype.indexOf.call(f,u,void 0),S;(S=0<=T)&&Array.prototype.splice.call(f,T,1),S&&(ci(u),o.g[l].length==0&&(delete o.g[l],o.h--))}}function _o(o,u,l,f){for(var T=0;T<o.length;++T){var S=o[T];if(!S.da&&S.listener==u&&S.capture==!!l&&S.ha==f)return T}return-1}var yo="closure_lm_"+(1e6*Math.random()|0),vo={};function xl(o,u,l,f,T){if(f&&f.once)return Ml(o,u,l,f,T);if(Array.isArray(u)){for(var S=0;S<u.length;S++)xl(o,u[S],l,f,T);return null}return l=To(l),o&&o[ir]?o.K(u,l,d(f)?!!f.capture:!!f,T):Ll(o,u,l,!1,f,T)}function Ll(o,u,l,f,T,S){if(!u)throw Error("Invalid event type");var k=d(T)?!!T.capture:!!T,ee=Io(o);if(ee||(o[yo]=ee=new li(o)),l=ee.add(u,l,f,k,S),l.proxy)return l;if(f=Qm(),l.proxy=f,f.src=o,f.listener=l,o.addEventListener)Gm||(T=k),T===void 0&&(T=!1),o.addEventListener(u.toString(),f,T);else if(o.attachEvent)o.attachEvent(Ul(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return l}function Qm(){function o(l){return u.call(o.src,o.listener,l)}let u=Ym;return o}function Ml(o,u,l,f,T){if(Array.isArray(u)){for(var S=0;S<u.length;S++)Ml(o,u[S],l,f,T);return null}return l=To(l),o&&o[ir]?o.L(u,l,d(f)?!!f.capture:!!f,T):Ll(o,u,l,!0,f,T)}function Vl(o,u,l,f,T){if(Array.isArray(u))for(var S=0;S<u.length;S++)Vl(o,u[S],l,f,T);else f=d(f)?!!f.capture:!!f,l=To(l),o&&o[ir]?(o=o.i,u=String(u).toString(),u in o.g&&(S=o.g[u],l=_o(S,l,f,T),-1<l&&(ci(S[l]),Array.prototype.splice.call(S,l,1),S.length==0&&(delete o.g[u],o.h--)))):o&&(o=Io(o))&&(u=o.g[u.toString()],o=-1,u&&(o=_o(u,l,f,T)),(l=-1<o?u[o]:null)&&Eo(l))}function Eo(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[ir])go(u.i,o);else{var l=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(l,f,o.capture):u.detachEvent?u.detachEvent(Ul(l),f):u.addListener&&u.removeListener&&u.removeListener(f),(l=Io(u))?(go(l,o),l.h==0&&(l.src=null,u[yo]=null)):ci(o)}}}function Ul(o){return o in vo?vo[o]:vo[o]="on"+o}function Ym(o,u){if(o.da)o=!0;else{u=new rr(u,this);var l=o.listener,f=o.ha||o.src;o.fa&&Eo(o),o=l.call(f,u)}return o}function Io(o){return o=o[yo],o instanceof li?o:null}var wo="__closure_events_fn_"+(1e9*Math.random()>>>0);function To(o){return typeof o=="function"?o:(o[wo]||(o[wo]=function(u){return o.handleEvent(u)}),o[wo])}function De(){bt.call(this),this.i=new li(this),this.M=this,this.F=null}P(De,bt),De.prototype[ir]=!0,De.prototype.removeEventListener=function(o,u,l,f){Vl(this,o,u,l,f)};function Ne(o,u){var l,f=o.F;if(f)for(l=[];f;f=f.F)l.push(f);if(o=o.M,f=u.type||u,typeof u=="string")u=new Ae(u,o);else if(u instanceof Ae)u.target=u.target||o;else{var T=u;u=new Ae(f,o),v(u,T)}if(T=!0,l)for(var S=l.length-1;0<=S;S--){var k=u.g=l[S];T=hi(k,f,!0,u)&&T}if(k=u.g=o,T=hi(k,f,!0,u)&&T,T=hi(k,f,!1,u)&&T,l)for(S=0;S<l.length;S++)k=u.g=l[S],T=hi(k,f,!1,u)&&T}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var l=o.g[u],f=0;f<l.length;f++)ci(l[f]);delete o.g[u],o.h--}}this.F=null},De.prototype.K=function(o,u,l,f){return this.i.add(String(o),u,!1,l,f)},De.prototype.L=function(o,u,l,f){return this.i.add(String(o),u,!0,l,f)};function hi(o,u,l,f){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,S=0;S<u.length;++S){var k=u[S];if(k&&!k.da&&k.capture==l){var ee=k.listener,Ie=k.ha||k.src;k.fa&&go(o.i,k),T=ee.call(Ie,f)!==!1&&T}}return T&&!f.defaultPrevented}function Bl(o,u,l){if(typeof o=="function")l&&(o=D(o,l));else if(o&&typeof o.handleEvent=="function")o=D(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function jl(o){o.g=Bl(()=>{o.g=null,o.i&&(o.i=!1,jl(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class Jm extends bt{constructor(u,l){super(),this.m=u,this.l=l,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:jl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(o){bt.call(this),this.h=o,this.g={}}P(sr,bt);var $l=[];function zl(o){X(o.g,function(u,l){this.g.hasOwnProperty(l)&&Eo(u)},o),o.g={}}sr.prototype.N=function(){sr.aa.N.call(this),zl(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ao=c.JSON.stringify,Xm=c.JSON.parse,Zm=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Do(){}Do.prototype.h=null;function ql(o){return o.h||(o.h=o.i())}function Gl(){}var or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function So(){Ae.call(this,"d")}P(So,Ae);function bo(){Ae.call(this,"c")}P(bo,Ae);var zt={},Kl=null;function di(){return Kl=Kl||new De}zt.La="serverreachability";function Wl(o){Ae.call(this,zt.La,o)}P(Wl,Ae);function ar(o){let u=di();Ne(u,new Wl(u))}zt.STAT_EVENT="statevent";function Hl(o,u){Ae.call(this,zt.STAT_EVENT,o),this.stat=u}P(Hl,Ae);function Oe(o){let u=di();Ne(u,new Hl(u,o))}zt.Ma="timingevent";function Ql(o,u){Ae.call(this,zt.Ma,o),this.size=u}P(Ql,Ae);function ur(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function cr(){this.g=!0}cr.prototype.xa=function(){this.g=!1};function eg(o,u,l,f,T,S){o.info(function(){if(o.g)if(S)for(var k="",ee=S.split("&"),Ie=0;Ie<ee.length;Ie++){var H=ee[Ie].split("=");if(1<H.length){var Se=H[0];H=H[1];var be=Se.split("_");k=2<=be.length&&be[1]=="type"?k+(Se+"="+H+"&"):k+(Se+"=redacted&")}}else k=null;else k=S;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+u+`
`+l+`
`+k})}function tg(o,u,l,f,T,S,k){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+u+`
`+l+`
`+S+" "+k})}function _n(o,u,l,f){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+rg(o,l)+(f?" "+f:"")})}function ng(o,u){o.info(function(){return"TIMEOUT: "+u})}cr.prototype.info=function(){};function rg(o,u){if(!o.g)return u;if(!u)return null;try{var l=JSON.parse(u);if(l){for(o=0;o<l.length;o++)if(Array.isArray(l[o])){var f=l[o];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return Ao(l)}catch{return u}}var fi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Co;function pi(){}P(pi,Do),pi.prototype.g=function(){return new XMLHttpRequest},pi.prototype.i=function(){return{}},Co=new pi;function Ct(o,u,l,f){this.j=o,this.i=u,this.l=l,this.R=f||1,this.U=new sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jl}function Jl(){this.i=null,this.g="",this.h=!1}var Xl={},Ro={};function Po(o,u,l){o.L=1,o.v=yi(ht(u)),o.m=l,o.P=!0,Zl(o,null)}function Zl(o,u){o.F=Date.now(),mi(o),o.A=ht(o.v);var l=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),fh(l.i,"t",f),o.C=0,l=o.j.J,o.h=new Jl,o.g=kh(o.j,l?u:null,!o.m),0<o.O&&(o.M=new Jm(D(o.Y,o,o.g),o.O)),u=o.U,l=o.g,f=o.ca;var T="readystatechange";Array.isArray(T)||(T&&($l[0]=T.toString()),T=$l);for(var S=0;S<T.length;S++){var k=xl(l,T[S],f||u.handleEvent,!1,u.h||u);if(!k)break;u.g[k.key]=k}u=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),ar(),eg(o.i,o.u,o.A,o.l,o.R,o.m)}Ct.prototype.ca=function(o){o=o.target;let u=this.M;u&&dt(o)==3?u.j():this.Y(o)},Ct.prototype.Y=function(o){try{if(o==this.g)e:{let be=dt(this.g);var u=this.g.Ba();let En=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||Eh(this.g)))){this.J||be!=4||u==7||(u==8||0>=En?ar(3):ar(2)),ko(this);var l=this.g.Z();this.X=l;t:if(eh(this)){var f=Eh(this.g);o="";var T=f.length,S=dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qt(this),lr(this);var k="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,o+=this.h.i.decode(f[u],{stream:!(S&&u==T-1)});f.length=0,this.h.g+=o,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=l==200,tg(this.i,this.u,this.A,this.l,this.R,be,l),this.o){if(this.T&&!this.K){t:{if(this.g){var ee,Ie=this.g;if((ee=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(ee)){var H=ee;break t}}H=null}if(l=H)_n(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,No(this,l);else{this.o=!1,this.s=3,Oe(12),qt(this),lr(this);break e}}if(this.P){l=!0;let He;for(;!this.J&&this.C<k.length;)if(He=ig(this,k),He==Ro){be==4&&(this.s=4,Oe(14),l=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(He==Xl){this.s=4,Oe(15),_n(this.i,this.l,k,"[Invalid Chunk]"),l=!1;break}else _n(this.i,this.l,He,null),No(this,He);if(eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||k.length!=0||this.h.h||(this.s=1,Oe(16),l=!1),this.o=this.o&&l,!l)_n(this.i,this.l,k,"[Invalid Chunked Response]"),qt(this),lr(this);else if(0<k.length&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.ba&&!Se.M&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Vo(Se),Se.M=!0,Oe(11))}}else _n(this.i,this.l,k,null),No(this,k);be==4&&qt(this),this.o&&!this.J&&(be==4?bh(this.j,this):(this.o=!1,mi(this)))}else Ig(this.g),l==400&&0<k.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),qt(this),lr(this)}}}catch{}finally{}};function eh(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function ig(o,u){var l=o.C,f=u.indexOf(`
`,l);return f==-1?Ro:(l=Number(u.substring(l,f)),isNaN(l)?Xl:(f+=1,f+l>u.length?Ro:(u=u.slice(f,f+l),o.C=f+l,u)))}Ct.prototype.cancel=function(){this.J=!0,qt(this)};function mi(o){o.S=Date.now()+o.I,th(o,o.I)}function th(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ur(D(o.ba,o),u)}function ko(o){o.B&&(c.clearTimeout(o.B),o.B=null)}Ct.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(ng(this.i,this.A),this.L!=2&&(ar(),Oe(17)),qt(this),this.s=2,lr(this)):th(this,this.S-o)};function lr(o){o.j.G==0||o.J||bh(o.j,o)}function qt(o){ko(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,zl(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function No(o,u){try{var l=o.j;if(l.G!=0&&(l.g==o||Oo(l.h,o))){if(!o.K&&Oo(l.h,o)&&l.G==3){try{var f=l.Da.g.parse(u)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){e:if(!l.u){if(l.g)if(l.g.F+3e3<o.F)Ti(l),Ii(l);else break e;Mo(l),Oe(18)}}else l.za=T[1],0<l.za-l.T&&37500>T[2]&&l.F&&l.v==0&&!l.C&&(l.C=ur(D(l.Za,l),6e3));if(1>=ih(l.h)&&l.ca){try{l.ca()}catch{}l.ca=void 0}}else Kt(l,11)}else if((o.K||l.g==o)&&Ti(l),!q(u))for(T=l.Da.g.parse(u),u=0;u<T.length;u++){let H=T[u];if(l.T=H[0],H=H[1],l.G==2)if(H[0]=="c"){l.K=H[1],l.ia=H[2];let Se=H[3];Se!=null&&(l.la=Se,l.j.info("VER="+l.la));let be=H[4];be!=null&&(l.Aa=be,l.j.info("SVER="+l.Aa));let En=H[5];En!=null&&typeof En=="number"&&0<En&&(f=1.5*En,l.L=f,l.j.info("backChannelRequestTimeoutMs_="+f)),f=l;let He=o.g;if(He){let Di=He.g?He.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Di){var S=f.h;S.g||Di.indexOf("spdy")==-1&&Di.indexOf("quic")==-1&&Di.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Fo(S,S.h),S.h=null))}if(f.D){let Uo=He.g?He.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(f.ya=Uo,ie(f.I,f.D,Uo))}}l.G=3,l.l&&l.l.ua(),l.ba&&(l.R=Date.now()-o.F,l.j.info("Handshake RTT: "+l.R+"ms")),f=l;var k=o;if(f.qa=Ph(f,f.J?f.ia:null,f.W),k.K){sh(f.h,k);var ee=k,Ie=f.L;Ie&&(ee.I=Ie),ee.B&&(ko(ee),mi(ee)),f.g=k}else Dh(f);0<l.i.length&&wi(l)}else H[0]!="stop"&&H[0]!="close"||Kt(l,7);else l.G==3&&(H[0]=="stop"||H[0]=="close"?H[0]=="stop"?Kt(l,7):Lo(l):H[0]!="noop"&&l.l&&l.l.ta(H),l.v=0)}}ar(4)}catch{}}var sg=class{constructor(o,u){this.g=o,this.map=u}};function nh(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rh(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function ih(o){return o.h?1:o.g?o.g.size:0}function Oo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Fo(o,u){o.g?o.g.add(u):o.h=u}function sh(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}nh.prototype.cancel=function(){if(this.i=oh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function oh(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let l of o.g.values())u=u.concat(l.D);return u}return O(o.i)}function og(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(h(o)){for(var u=[],l=o.length,f=0;f<l;f++)u.push(o[f]);return u}u=[],l=0;for(f in o)u[l++]=o[f];return u}function ag(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(h(o)||typeof o=="string"){var u=[];o=o.length;for(var l=0;l<o;l++)u.push(l);return u}u=[],l=0;for(let f in o)u[l++]=f;return u}}}function ah(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(h(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var l=ag(o),f=og(o),T=f.length,S=0;S<T;S++)u.call(void 0,f[S],l&&l[S],o)}var uh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ug(o,u){if(o){o=o.split("&");for(var l=0;l<o.length;l++){var f=o[l].indexOf("="),T=null;if(0<=f){var S=o[l].substring(0,f);T=o[l].substring(f+1)}else S=o[l];u(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Gt(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Gt){this.h=o.h,gi(this,o.j),this.o=o.o,this.g=o.g,_i(this,o.s),this.l=o.l;var u=o.i,l=new fr;l.i=u.i,u.g&&(l.g=new Map(u.g),l.h=u.h),ch(this,l),this.m=o.m}else o&&(u=String(o).match(uh))?(this.h=!1,gi(this,u[1]||"",!0),this.o=hr(u[2]||""),this.g=hr(u[3]||"",!0),_i(this,u[4]),this.l=hr(u[5]||"",!0),ch(this,u[6]||"",!0),this.m=hr(u[7]||"")):(this.h=!1,this.i=new fr(null,this.h))}Gt.prototype.toString=function(){var o=[],u=this.j;u&&o.push(dr(u,lh,!0),":");var l=this.g;return(l||u=="file")&&(o.push("//"),(u=this.o)&&o.push(dr(u,lh,!0),"@"),o.push(encodeURIComponent(String(l)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.s,l!=null&&o.push(":",String(l))),(l=this.l)&&(this.g&&l.charAt(0)!="/"&&o.push("/"),o.push(dr(l,l.charAt(0)=="/"?hg:lg,!0))),(l=this.i.toString())&&o.push("?",l),(l=this.m)&&o.push("#",dr(l,fg)),o.join("")};function ht(o){return new Gt(o)}function gi(o,u,l){o.j=l?hr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function _i(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function ch(o,u,l){u instanceof fr?(o.i=u,pg(o.i,o.h)):(l||(u=dr(u,dg)),o.i=new fr(u,o.h))}function ie(o,u,l){o.i.set(u,l)}function yi(o){return ie(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function hr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function dr(o,u,l){return typeof o=="string"?(o=encodeURI(o).replace(u,cg),l&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function cg(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var lh=/[#\/\?@]/g,lg=/[#\?:]/g,hg=/[#\?]/g,dg=/[#\?@]/g,fg=/#/g;function fr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Rt(o){o.g||(o.g=new Map,o.h=0,o.i&&ug(o.i,function(u,l){o.add(decodeURIComponent(u.replace(/\+/g," ")),l)}))}n=fr.prototype,n.add=function(o,u){Rt(this),this.i=null,o=yn(this,o);var l=this.g.get(o);return l||this.g.set(o,l=[]),l.push(u),this.h+=1,this};function hh(o,u){Rt(o),u=yn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function dh(o,u){return Rt(o),u=yn(o,u),o.g.has(u)}n.forEach=function(o,u){Rt(this),this.g.forEach(function(l,f){l.forEach(function(T){o.call(u,T,f,this)},this)},this)},n.na=function(){Rt(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),l=[];for(let f=0;f<u.length;f++){let T=o[f];for(let S=0;S<T.length;S++)l.push(u[f])}return l},n.V=function(o){Rt(this);let u=[];if(typeof o=="string")dh(this,o)&&(u=u.concat(this.g.get(yn(this,o))));else{o=Array.from(this.g.values());for(let l=0;l<o.length;l++)u=u.concat(o[l])}return u},n.set=function(o,u){return Rt(this),this.i=null,o=yn(this,o),dh(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function fh(o,u,l){hh(o,u),0<l.length&&(o.i=null,o.g.set(yn(o,u),O(l)),o.h+=l.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var l=0;l<u.length;l++){var f=u[l];let S=encodeURIComponent(String(f)),k=this.V(f);for(f=0;f<k.length;f++){var T=S;k[f]!==""&&(T+="="+encodeURIComponent(String(k[f]))),o.push(T)}}return this.i=o.join("&")};function yn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function pg(o,u){u&&!o.j&&(Rt(o),o.i=null,o.g.forEach(function(l,f){var T=f.toLowerCase();f!=T&&(hh(this,f),fh(this,T,l))},o)),o.j=u}function mg(o,u){let l=new cr;if(c.Image){let f=new Image;f.onload=b(Pt,l,"TestLoadImage: loaded",!0,u,f),f.onerror=b(Pt,l,"TestLoadImage: error",!1,u,f),f.onabort=b(Pt,l,"TestLoadImage: abort",!1,u,f),f.ontimeout=b(Pt,l,"TestLoadImage: timeout",!1,u,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else u(!1)}function gg(o,u){let l=new cr,f=new AbortController,T=setTimeout(()=>{f.abort(),Pt(l,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:f.signal}).then(S=>{clearTimeout(T),S.ok?Pt(l,"TestPingServer: ok",!0,u):Pt(l,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),Pt(l,"TestPingServer: error",!1,u)})}function Pt(o,u,l,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(l)}catch{}}function _g(){this.g=new Zm}function yg(o,u,l){let f=l||"";try{ah(o,function(T,S){let k=T;d(T)&&(k=Ao(T)),u.push(f+S+"="+encodeURIComponent(k))})}catch(T){throw u.push(f+"type="+encodeURIComponent("_badmap")),T}}function pr(o){this.l=o.Ub||null,this.j=o.eb||!1}P(pr,Do),pr.prototype.g=function(){return new vi(this.l,this.j)},pr.prototype.i=function(o){return function(){return o}}({});function vi(o,u){De.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(vi,De),n=vi.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,gr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ph(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ph(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?mr(this):gr(this),this.readyState==3&&ph(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,mr(this))},n.Qa=function(o){this.g&&(this.response=o,mr(this))},n.ga=function(){this.g&&mr(this)};function mr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,gr(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var l=u.next();!l.done;)l=l.value,o.push(l[0]+": "+l[1]),l=u.next();return o.join(`\r
`)};function gr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function mh(o){let u="";return X(o,function(l,f){u+=f,u+=":",u+=l,u+=`\r
`}),u}function xo(o,u,l){e:{for(f in l){var f=!1;break e}f=!0}f||(l=mh(l),typeof o=="string"?l!=null&&encodeURIComponent(String(l)):ie(o,u,l))}function oe(o){De.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(oe,De);var vg=/^https?$/i,Eg=["POST","PUT"];n=oe.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,l,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Co.g(),this.v=this.o?ql(this.o):ql(Co),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(S){gh(this,S);return}if(o=l||"",l=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)l.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let S of f.keys())l.set(S,f.get(S));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(l.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Eg,u,void 0))||f||T||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,k]of l)this.g.setRequestHeader(S,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vh(this),this.u=!0,this.g.send(o),this.u=!1}catch(S){gh(this,S)}};function gh(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,_h(o),Ei(o)}function _h(o){o.A||(o.A=!0,Ne(o,"complete"),Ne(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ne(this,"complete"),Ne(this,"abort"),Ei(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),oe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yh(this):this.bb())},n.bb=function(){yh(this)};function yh(o){if(o.h&&typeof a<"u"&&(!o.v[1]||dt(o)!=4||o.Z()!=2)){if(o.u&&dt(o)==4)Bl(o.Ea,0,o);else if(Ne(o,"readystatechange"),dt(o)==4){o.h=!1;try{let k=o.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var l;if(!(l=u)){var f;if(f=k===0){var T=String(o.D).match(uh)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),f=!vg.test(T?T.toLowerCase():"")}l=f}if(l)Ne(o,"complete"),Ne(o,"success");else{o.m=6;try{var S=2<dt(o)?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.Z()+"]",_h(o)}}finally{Ei(o)}}}}function Ei(o,u){if(o.g){vh(o);let l=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Ne(o,"ready");try{l.onreadystatechange=f}catch{}}}function vh(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function dt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<dt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Xm(u)}};function Eh(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Ig(o){let u={};o=(o.g&&2<=dt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(q(o[f]))continue;var l=w(o[f]);let T=l[0];if(l=l[1],typeof l!="string")continue;l=l.trim();let S=u[T]||[];u[T]=S,S.push(l)}I(u,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _r(o,u,l){return l&&l.internalChannelParams&&l.internalChannelParams[o]||u}function Ih(o){this.Aa=0,this.i=[],this.j=new cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_r("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_r("baseRetryDelayMs",5e3,o),this.cb=_r("retryDelaySeedMs",1e4,o),this.Wa=_r("forwardChannelMaxRetries",2,o),this.wa=_r("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new nh(o&&o.concurrentRequestLimit),this.Da=new _g,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ih.prototype,n.la=8,n.G=1,n.connect=function(o,u,l,f){Oe(0),this.W=o,this.H=u||{},l&&f!==void 0&&(this.H.OSID=l,this.H.OAID=f),this.F=this.X,this.I=Ph(this,null,this.W),wi(this)};function Lo(o){if(wh(o),o.G==3){var u=o.U++,l=ht(o.I);if(ie(l,"SID",o.K),ie(l,"RID",u),ie(l,"TYPE","terminate"),yr(o,l),u=new Ct(o,o.j,u),u.L=2,u.v=yi(ht(l)),l=!1,c.navigator&&c.navigator.sendBeacon)try{l=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!l&&c.Image&&(new Image().src=u.v,l=!0),l||(u.g=kh(u.j,null),u.g.ea(u.v)),u.F=Date.now(),mi(u)}Rh(o)}function Ii(o){o.g&&(Vo(o),o.g.cancel(),o.g=null)}function wh(o){Ii(o),o.u&&(c.clearTimeout(o.u),o.u=null),Ti(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function wi(o){if(!rh(o.h)&&!o.s){o.s=!0;var u=o.Ga;tr||Fl(),nr||(tr(),nr=!0),mo.add(u,o),o.B=0}}function wg(o,u){return ih(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ur(D(o.Ga,o,u),Ch(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let T=new Ct(this,this.j,o),S=this.o;if(this.S&&(S?(S=m(S),v(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var u=0,l=0;l<this.i.length;l++){t:{var f=this.i[l];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(u+=f,4096<u){u=l;break e}if(u===4096||l===this.i.length-1){u=l+1;break e}}u=1e3}else u=1e3;u=Ah(this,T,u),l=ht(this.I),ie(l,"RID",o),ie(l,"CVER",22),this.D&&ie(l,"X-HTTP-Session-Id",this.D),yr(this,l),S&&(this.O?u="headers="+encodeURIComponent(String(mh(S)))+"&"+u:this.m&&xo(l,this.m,S)),Fo(this.h,T),this.Ua&&ie(l,"TYPE","init"),this.P?(ie(l,"$req",u),ie(l,"SID","null"),T.T=!0,Po(T,l,null)):Po(T,l,u),this.G=2}}else this.G==3&&(o?Th(this,o):this.i.length==0||rh(this.h)||Th(this))};function Th(o,u){var l;u?l=u.l:l=o.U++;let f=ht(o.I);ie(f,"SID",o.K),ie(f,"RID",l),ie(f,"AID",o.T),yr(o,f),o.m&&o.o&&xo(f,o.m,o.o),l=new Ct(o,o.j,l,o.B+1),o.m===null&&(l.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Ah(o,l,1e3),l.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Fo(o.h,l),Po(l,f,u)}function yr(o,u){o.H&&X(o.H,function(l,f){ie(u,f,l)}),o.l&&ah({},function(l,f){ie(u,f,l)})}function Ah(o,u,l){l=Math.min(o.i.length,l);var f=o.l?D(o.l.Na,o.l,o):null;e:{var T=o.i;let S=-1;for(;;){let k=["count="+l];S==-1?0<l?(S=T[0].g,k.push("ofs="+S)):S=0:k.push("ofs="+S);let ee=!0;for(let Ie=0;Ie<l;Ie++){let H=T[Ie].g,Se=T[Ie].map;if(H-=S,0>H)S=Math.max(0,T[Ie].g-100),ee=!1;else try{yg(Se,k,"req"+H+"_")}catch{f&&f(Se)}}if(ee){f=k.join("&");break e}}}return o=o.i.splice(0,l),u.D=o,f}function Dh(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;tr||Fl(),nr||(tr(),nr=!0),mo.add(u,o),o.v=0}}function Mo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ur(D(o.Fa,o),Ch(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Sh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ur(D(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),Ii(this),Sh(this))};function Vo(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Sh(o){o.g=new Ct(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=ht(o.qa);ie(u,"RID","rpc"),ie(u,"SID",o.K),ie(u,"AID",o.T),ie(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&ie(u,"TO",o.ja),ie(u,"TYPE","xmlhttp"),yr(o,u),o.m&&o.o&&xo(u,o.m,o.o),o.L&&(o.g.I=o.L);var l=o.g;o=o.ia,l.L=1,l.v=yi(ht(u)),l.m=null,l.P=!0,Zl(l,o)}n.Za=function(){this.C!=null&&(this.C=null,Ii(this),Mo(this),Oe(19))};function Ti(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function bh(o,u){var l=null;if(o.g==u){Ti(o),Vo(o),o.g=null;var f=2}else if(Oo(o.h,u))l=u.D,sh(o.h,u),f=1;else return;if(o.G!=0){if(u.o)if(f==1){l=u.m?u.m.length:0,u=Date.now()-u.F;var T=o.B;f=di(),Ne(f,new Ql(f,l)),wi(o)}else Dh(o);else if(T=u.s,T==3||T==0&&0<u.X||!(f==1&&wg(o,u)||f==2&&Mo(o)))switch(l&&0<l.length&&(u=o.h,u.i=u.i.concat(l)),T){case 1:Kt(o,5);break;case 4:Kt(o,10);break;case 3:Kt(o,6);break;default:Kt(o,2)}}}function Ch(o,u){let l=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(l*=2),l*u}function Kt(o,u){if(o.j.info("Error code "+u),u==2){var l=D(o.fb,o),f=o.Xa;let T=!f;f=new Gt(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gi(f,"https"),yi(f),T?mg(f.toString(),l):gg(f.toString(),l)}else Oe(2);o.G=0,o.l&&o.l.sa(u),Rh(o),wh(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Rh(o){if(o.G=0,o.ka=[],o.l){let u=oh(o.h);(u.length!=0||o.i.length!=0)&&(N(o.ka,u),N(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function Ph(o,u,l){var f=l instanceof Gt?ht(l):new Gt(l);if(f.g!="")u&&(f.g=u+"."+f.g),_i(f,f.s);else{var T=c.location;f=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var S=new Gt(null);f&&gi(S,f),u&&(S.g=u),T&&_i(S,T),l&&(S.l=l),f=S}return l=o.D,u=o.ya,l&&u&&ie(f,l,u),ie(f,"VER",o.la),yr(o,f),f}function kh(o,u,l){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new oe(new pr({eb:l})):new oe(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nh(){}n=Nh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ai(){}Ai.prototype.g=function(o,u){return new xe(o,u)};function xe(o,u){De.call(this),this.g=new Ih(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!q(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!q(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new vn(this)}P(xe,De),xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xe.prototype.close=function(){Lo(this.g)},xe.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var l={};l.__data__=o,o=l}else this.u&&(l={},l.__data__=Ao(o),o=l);u.i.push(new sg(u.Ya++,o)),u.G==3&&wi(u)},xe.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,xe.aa.N.call(this)};function Oh(o){So.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let l in u){o=l;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}P(Oh,So);function Fh(){bo.call(this),this.status=1}P(Fh,bo);function vn(o){this.g=o}P(vn,Nh),vn.prototype.ua=function(){Ne(this.g,"a")},vn.prototype.ta=function(o){Ne(this.g,new Oh(o))},vn.prototype.sa=function(o){Ne(this.g,new Fh)},vn.prototype.ra=function(){Ne(this.g,"b")},Ai.prototype.createWebChannel=Ai.prototype.g,xe.prototype.send=xe.prototype.o,xe.prototype.open=xe.prototype.m,xe.prototype.close=xe.prototype.close,Ru=wt.createWebChannelTransport=function(){return new Ai},Cu=wt.getStatEventTarget=function(){return di()},bu=wt.Event=zt,Ss=wt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fi.NO_ERROR=0,fi.TIMEOUT=8,fi.HTTP_ERROR=6,Br=wt.ErrorCode=fi,Yl.COMPLETE="complete",Su=wt.EventType=Yl,Gl.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",De.prototype.listen=De.prototype.K,Pn=wt.WebChannel=Gl,zI=wt.FetchXmlHttpFactory=pr,oe.prototype.listenOnce=oe.prototype.L,oe.prototype.getLastError=oe.prototype.Ka,oe.prototype.getLastErrorCode=oe.prototype.Ba,oe.prototype.getStatus=oe.prototype.Z,oe.prototype.getResponseJson=oe.prototype.Oa,oe.prototype.getResponseText=oe.prototype.oa,oe.prototype.send=oe.prototype.ea,oe.prototype.setWithCredentials=oe.prototype.Ha,Du=wt.XhrIo=oe}).apply(typeof Ds<"u"?Ds:typeof self<"u"?self:typeof window<"u"?window:{});var ip="@firebase/firestore";var Ee=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ee.UNAUTHENTICATED=new Ee(null),Ee.GOOGLE_CREDENTIALS=new Ee("google-credentials-uid"),Ee.FIRST_PARTY=new Ee("first-party-uid"),Ee.MOCK_USER=new Ee("mock-user");var Xn="10.14.0";var an=new Nt("@firebase/firestore");function jr(){return an.logLevel}function F(n,...e){if(an.logLevel<=j.DEBUG){let t=e.map(fl);an.debug(`Firestore (${Xn}): ${n}`,...t)}}function At(n,...e){if(an.logLevel<=j.ERROR){let t=e.map(fl);an.error(`Firestore (${Xn}): ${n}`,...t)}}function Vn(n,...e){if(an.logLevel<=j.WARN){let t=e.map(fl);an.warn(`Firestore (${Xn}): ${n}`,...t)}}function fl(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function M(n="Unexpected state"){let e=`FIRESTORE (${Xn}) INTERNAL ASSERTION FAILED: `+n;throw At(e),new Error(e)}function Z(n,e){n||M()}function U(n,e){return n}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Me{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ks=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Fu=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ee.UNAUTHENTICATED))}shutdown(){}},xu=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Lu=class{constructor(e){this.t=e,this.currentUser=Ee.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Z(this.o===void 0);let r=this.i,i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve(),s=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let h=s;e.enqueueRetryable(()=>y(this,null,function*(){yield h.promise,yield i(this.currentUser)}))},c=h=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?c(h):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rt)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new ks(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new Ee(e)}},Mu=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ee.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Vu=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Mu(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ee.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Uu=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Bu=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Z(this.o===void 0);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Z(typeof t.token=="string"),this.R=t.token,new Uu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function qI(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ns=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=qI(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Q(n,e){return n<e?-1:n>e?1:0}function Un(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Te=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new x(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var B=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Te(0,0))}static max(){return new n(new Te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Os=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&M(),r===void 0?r=e.length-t:r>e.length-t&&M(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ae=class n extends Os{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},GI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Be=class n extends Os{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return GI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new x(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new x(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new x(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new x(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var L=class n{constructor(e){this.path=e}static fromPath(e){return new n(ae.fromString(e))}static fromName(e){return new n(ae.fromString(e).popFirst(5))}static empty(){return new n(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ae(e.slice()))}};var ju=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};ju.UNKNOWN_ID=-1;function KI(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=B.fromTimestamp(r===1e9?new Te(t+1,0):new Te(t,r));return new un(i,L.empty(),e)}function WI(n){return new un(n.readTime,n.key,-1)}var un=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(B.min(),L.empty(),-1)}static max(){return new n(B.max(),L.empty(),-1)}};function HI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=L.comparator(n.documentKey,e.documentKey),t!==0?t:Q(n.largestBatchId,e.largestBatchId))}var QI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$u=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function si(n){return y(this,null,function*(){if(n.code!==C.FAILED_PRECONDITION||n.message!==QI)throw n;F("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&M(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},h=>r(h))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),c=0;for(let h=0;h<s;h++){let d=h;t(e[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function YI(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oi(n){return n.name==="IndexedDbTransactionError"}var xp=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function oo(n){return n==null}function Wr(n){return n===0&&1/n==-1/0}function JI(n){return typeof n=="number"&&Number.isInteger(n)&&!Wr(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var XI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DS=[...XI,"documentOverlays"],ZI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ew=ZI,tw=[...ew,"indexConfiguration","indexState","indexEntries"];var SS=[...tw,"globals"];function sp(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mn(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lp(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ue=class n{constructor(e,t){this.comparator=e,this.root=t||it.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fn(this.root,e,this.comparator,!0)}},Fn=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},it=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw M();let e=this.left.check();if(e!==this.right.check())throw M();return e+(this.isRed()?0:1)}};it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw M()}get value(){throw M()}get color(){throw M()}get left(){throw M()}get right(){throw M()}copy(e,t,r,i,s){return this}insert(e,t,r){return new it(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Re=class n{constructor(e){this.comparator=e,this.data=new ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fs(this.data.getIterator())}getIteratorFrom(e){return new Fs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Fs=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ke=class n{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new n([])}unionWith(e){let t=new Re(Be.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Un(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var xs=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xs("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pe.EMPTY_BYTE_STRING=new Pe("");var nw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dt(n){if(Z(!!n),typeof n=="string"){let e=0,t=nw.exec(n);if(Z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:se(n.seconds),nanos:se(n.nanos)}}function se(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bt(n){return typeof n=="string"?Pe.fromBase64String(n):Pe.fromUint8Array(n)}function pl(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ml(n){let e=n.mapValue.fields.__previous_value__;return pl(e)?ml(e):e}function Hr(n){let e=Dt(n.mapValue.fields.__local_write_time__.timestampValue);return new Te(e.seconds,e.nanos)}var zu=class{constructor(e,t,r,i,s,a,c,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d}},Ls=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var bs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function cn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pl(n)?4:Vp(n)?9007199254740991:Mp(n)?10:11:M()}function at(n,e){if(n===e)return!0;let t=cn(n);if(t!==cn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hr(n).isEqual(Hr(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=Dt(i.timestampValue),c=Dt(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Bt(i.bytesValue).isEqual(Bt(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return se(i.geoPointValue.latitude)===se(s.geoPointValue.latitude)&&se(i.geoPointValue.longitude)===se(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return se(i.integerValue)===se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=se(i.doubleValue),c=se(s.doubleValue);return a===c?Wr(a)===Wr(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Un(n.arrayValue.values||[],e.arrayValue.values||[],at);case 10:case 11:return function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(sp(a)!==sp(c))return!1;for(let h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!at(a[h],c[h])))return!1;return!0}(n,e);default:return M()}}function Qr(n,e){return(n.values||[]).find(t=>at(t,e))!==void 0}function Bn(n,e){if(n===e)return 0;let t=cn(n),r=cn(e);if(t!==r)return Q(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Q(n.booleanValue,e.booleanValue);case 2:return function(s,a){let c=se(s.integerValue||s.doubleValue),h=se(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return op(n.timestampValue,e.timestampValue);case 4:return op(Hr(n),Hr(e));case 5:return Q(n.stringValue,e.stringValue);case 6:return function(s,a){let c=Bt(s),h=Bt(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let c=s.split("/"),h=a.split("/");for(let d=0;d<c.length&&d<h.length;d++){let p=Q(c[d],h[d]);if(p!==0)return p}return Q(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let c=Q(se(s.latitude),se(a.latitude));return c!==0?c:Q(se(s.longitude),se(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ap(n.arrayValue,e.arrayValue);case 10:return function(s,a){var c,h,d,p;let E=s.fields||{},D=a.fields||{},b=(c=E.value)===null||c===void 0?void 0:c.arrayValue,P=(h=D.value)===null||h===void 0?void 0:h.arrayValue,O=Q(((d=b?.values)===null||d===void 0?void 0:d.length)||0,((p=P?.values)===null||p===void 0?void 0:p.length)||0);return O!==0?O:ap(b,P)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===bs.mapValue&&a===bs.mapValue)return 0;if(s===bs.mapValue)return 1;if(a===bs.mapValue)return-1;let c=s.fields||{},h=Object.keys(c),d=a.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let E=0;E<h.length&&E<p.length;++E){let D=Q(h[E],p[E]);if(D!==0)return D;let b=Bn(c[h[E]],d[p[E]]);if(b!==0)return b}return Q(h.length,p.length)}(n.mapValue,e.mapValue);default:throw M()}}function op(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Q(n,e);let t=Dt(n),r=Dt(e),i=Q(t.seconds,r.seconds);return i!==0?i:Q(t.nanos,r.nanos)}function ap(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Bn(t[i],r[i]);if(s)return s}return Q(t.length,r.length)}function jn(n){return qu(n)}function qu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Dt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Bt(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return L.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=qu(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${qu(t.fields[a])}`;return i+"}"}(n.mapValue):M()}function Gu(n){return!!n&&"integerValue"in n}function gl(n){return!!n&&"arrayValue"in n}function up(n){return!!n&&"nullValue"in n}function cp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rs(n){return!!n&&"mapValue"in n}function Mp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function zr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return mn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zr(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zr(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Vp(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ue=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zr(t)}setAll(e){let t=Be.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=zr(a):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Rs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return at(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rs(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mn(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(zr(this.value))}};function Up(n){let e=[];return mn(n.fields,(t,r)=>{let i=new Be([t]);if(Rs(r)){let s=Up(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new Ke(e)}var Je=class n{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,B.min(),B.min(),B.min(),Ue.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,B.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,B.min(),B.min(),Ue.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,B.min(),B.min(),Ue.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(B.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $n=class{constructor(e,t){this.position=e,this.inclusive=t}};function lp(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=L.comparator(L.fromName(a.referenceValue),t.key):r=Bn(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hp(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!at(n.position[t],e.position[t]))return!1;return!0}var zn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function rw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ms=class{},_e=class n extends Ms{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Wu(e,t,r):t==="array-contains"?new Yu(e,r):t==="in"?new Ju(e,r):t==="not-in"?new Xu(e,r):t==="array-contains-any"?new Zu(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Hu(e,r):new Qu(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Bn(t,this.value)):t!==null&&cn(this.value)===cn(t)&&this.matchesComparison(Bn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return M()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ut=class n extends Ms{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Bp(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Bp(n){return n.op==="and"}function jp(n){return iw(n)&&Bp(n)}function iw(n){for(let e of n.filters)if(e instanceof ut)return!1;return!0}function Ku(n){if(n instanceof _e)return n.field.canonicalString()+n.op.toString()+jn(n.value);if(jp(n))return n.filters.map(e=>Ku(e)).join(",");{let e=n.filters.map(t=>Ku(t)).join(",");return`${n.op}(${e})`}}function $p(n,e){return n instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&at(r.value,i.value)}(n,e):n instanceof ut?function(r,i){return i instanceof ut&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&$p(a,i.filters[c]),!0):!1}(n,e):void M()}function zp(n){return n instanceof _e?function(t){return`${t.field.canonicalString()} ${t.op} ${jn(t.value)}`}(n):n instanceof ut?function(t){return t.op.toString()+" {"+t.getFilters().map(zp).join(" ,")+"}"}(n):"Filter"}var Wu=class extends _e{constructor(e,t,r){super(e,t,r),this.key=L.fromName(r.referenceValue)}matches(e){let t=L.comparator(e.key,this.key);return this.matchesComparison(t)}},Hu=class extends _e{constructor(e,t){super(e,"in",t),this.keys=qp("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Qu=class extends _e{constructor(e,t){super(e,"not-in",t),this.keys=qp("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function qp(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>L.fromName(r.referenceValue))}var Yu=class extends _e{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gl(t)&&Qr(t.arrayValue,this.value)}},Ju=class extends _e{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Qr(this.value.arrayValue,t)}},Xu=class extends _e{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Qr(this.value.arrayValue,t)}},Zu=class extends _e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!gl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qr(this.value.arrayValue,r))}};var ec=class{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}};function dp(n,e=null,t=[],r=[],i=null,s=null,a=null){return new ec(n,e,t,r,i,s,a)}function _l(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ku(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),oo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jn(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jn(r)).join(",")),e.ue=t}return e.ue}function yl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rw(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$p(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hp(n.startAt,e.startAt)&&hp(n.endAt,e.endAt)}function tc(n){return L.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var qn=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function sw(n,e,t,r,i,s,a,c){return new qn(n,e,t,r,i,s,a,c)}function Gp(n){return new qn(n)}function fp(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ow(n){return n.collectionGroup!==null}function qr(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Re(Be.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zn(s,r))}),t.has(Be.keyField().canonicalString())||e.ce.push(new zn(Be.keyField(),r))}return e.ce}function st(n){let e=U(n);return e.le||(e.le=aw(e,qr(n))),e.le}function aw(n,e){if(n.limitType==="F")return dp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new zn(i.field,s)});let t=n.endAt?new $n(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new $n(n.startAt.position,n.startAt.inclusive):null;return dp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function nc(n,e,t){return new qn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ao(n,e){return yl(st(n),st(e))&&n.limitType===e.limitType}function Kp(n){return`${_l(st(n))}|lt:${n.limitType}`}function kn(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>zp(i)).join(", ")}]`),oo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>jn(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>jn(i)).join(",")),`Target(${r})`}(st(n))}; limitType=${n.limitType})`}function uo(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):L.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of qr(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,h){let d=lp(a,c,h);return a.inclusive?d<=0:d<0}(r.startAt,qr(r),i)||r.endAt&&!function(a,c,h){let d=lp(a,c,h);return a.inclusive?d>=0:d>0}(r.endAt,qr(r),i))}(n,e)}function uw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Wp(n){return(e,t)=>{let r=!1;for(let i of qr(n)){let s=cw(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function cw(n,e,t){let r=n.field.isKeyField()?L.comparator(e.key,t.key):function(s,a,c){let h=a.data.field(s),d=c.data.field(s);return h!==null&&d!==null?Bn(h,d):M()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return M()}}var jt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mn(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Lp(this.inner)}size(){return this.innerSize}};var lw=new ue(L.comparator);function St(){return lw}var Hp=new ue(L.comparator);function $r(...n){let e=Hp;for(let t of n)e=e.insert(t.key,t);return e}function Qp(n){let e=Hp;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function sn(){return Gr()}function Yp(){return Gr()}function Gr(){return new jt(n=>n.toString(),(n,e)=>n.isEqual(e))}var hw=new ue(L.comparator),dw=new Re(L.comparator);function $(...n){let e=dw;for(let t of n)e=e.add(t);return e}var fw=new Re(Q);function pw(){return fw}function vl(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wr(e)?"-0":e}}function Jp(n){return{integerValue:""+n}}function mw(n,e){return JI(e)?Jp(e):vl(n,e)}var Gn=class{constructor(){this._=void 0}};function gw(n,e,t){return n instanceof Kn?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&pl(s)&&(s=ml(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof ln?Zp(n,e):n instanceof hn?em(n,e):function(i,s){let a=Xp(i,s),c=pp(a)+pp(i.Pe);return Gu(a)&&Gu(i.Pe)?Jp(c):vl(i.serializer,c)}(n,e)}function _w(n,e,t){return n instanceof ln?Zp(n,e):n instanceof hn?em(n,e):t}function Xp(n,e){return n instanceof Wn?function(r){return Gu(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Kn=class extends Gn{},ln=class extends Gn{constructor(e){super(),this.elements=e}};function Zp(n,e){let t=tm(e);for(let r of n.elements)t.some(i=>at(i,r))||t.push(r);return{arrayValue:{values:t}}}var hn=class extends Gn{constructor(e){super(),this.elements=e}};function em(n,e){let t=tm(e);for(let r of n.elements)t=t.filter(i=>!at(i,r));return{arrayValue:{values:t}}}var Wn=class extends Gn{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function pp(n){return se(n.integerValue||n.doubleValue)}function tm(n){return gl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function yw(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ln&&i instanceof ln||r instanceof hn&&i instanceof hn?Un(r.elements,i.elements,at):r instanceof Wn&&i instanceof Wn?at(r.Pe,i.Pe):r instanceof Kn&&i instanceof Kn}(n.transform,e.transform)}var rc=class{constructor(e,t){this.version=e,this.transformResults=t}},Tt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ps(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Hn=class{};function nm(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yr(n.key,Tt.none()):new dn(n.key,n.data,Tt.none());{let t=n.data,r=Ue.empty(),i=new Re(Be.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ct(n.key,r,new Ke(i.toArray()),Tt.none())}}function vw(n,e,t){n instanceof dn?function(i,s,a){let c=i.value.clone(),h=gp(i.fieldTransforms,s,a.transformResults);c.setAll(h),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ct?function(i,s,a){if(!Ps(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=gp(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(rm(i)),h.setAll(c),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Kr(n,e,t,r){return n instanceof dn?function(s,a,c,h){if(!Ps(s.precondition,a))return c;let d=s.value.clone(),p=_p(s.fieldTransforms,h,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof ct?function(s,a,c,h){if(!Ps(s.precondition,a))return c;let d=_p(s.fieldTransforms,h,a),p=a.data;return p.setAll(rm(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(E=>E.field))}(n,e,t,r):function(s,a,c){return Ps(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function Ew(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Xp(r.transform,i||null);s!=null&&(t===null&&(t=Ue.empty()),t.set(r.field,s))}return t||null}function mp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Un(r,i,(s,a)=>yw(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var dn=class extends Hn{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ct=class extends Hn{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function rm(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function gp(n,e,t){let r=new Map;Z(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,_w(a,c,t[i]))}return r}function _p(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,gw(s,a,e))}return r}var Yr=class extends Hn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ic=class extends Hn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&vw(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kr(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Kr(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Yp();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;let h=nm(a,c);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(B.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$())}isEqual(e){return this.batchId===e.batchId&&Un(this.mutations,e.mutations,(t,r)=>mp(t,r))&&Un(this.baseMutations,e.baseMutations,(t,r)=>mp(t,r))}},oc=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Z(e.mutations.length===r.length);let i=function(){return hw}(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var ac=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var uc=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var pe,W;function Iw(n){switch(n){default:return M();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function im(n){if(n===void 0)return At("GRPC error has no .code"),C.UNKNOWN;switch(n){case pe.OK:return C.OK;case pe.CANCELLED:return C.CANCELLED;case pe.UNKNOWN:return C.UNKNOWN;case pe.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case pe.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case pe.INTERNAL:return C.INTERNAL;case pe.UNAVAILABLE:return C.UNAVAILABLE;case pe.UNAUTHENTICATED:return C.UNAUTHENTICATED;case pe.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case pe.NOT_FOUND:return C.NOT_FOUND;case pe.ALREADY_EXISTS:return C.ALREADY_EXISTS;case pe.PERMISSION_DENIED:return C.PERMISSION_DENIED;case pe.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case pe.ABORTED:return C.ABORTED;case pe.OUT_OF_RANGE:return C.OUT_OF_RANGE;case pe.UNIMPLEMENTED:return C.UNIMPLEMENTED;case pe.DATA_LOSS:return C.DATA_LOSS;default:return M()}}(W=pe||(pe={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var yp=null;function ww(){return new TextEncoder}var Tw=new Vt([4294967295,4294967295],0);function vp(n){let e=ww().encode(n),t=new Au;return t.update(e),new Uint8Array(t.digest())}function Ep(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vt([t,r],0),new Vt([i,s],0)]}var cc=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new on(`Invalid padding: ${t}`);if(r<0)throw new on(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new on(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new on(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vt.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Vt.fromNumber(r)));return i.compare(Tw)===1&&(i=new Vt([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=vp(e),[r,i]=Ep(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let t=vp(e),[r,i]=Ep(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},on=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vs=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Jr.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(B.min(),i,new ue(Q),St(),$())}},Jr=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,$(),$(),$())}};var Ln=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Us=class{constructor(e,t){this.targetId=e,this.me=t}},Bs=class{constructor(e,t,r=Pe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},js=class{constructor(){this.fe=0,this.ge=wp(),this.pe=Pe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$(),t=$(),r=$();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:M()}}),new Jr(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=wp()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},lc=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=St(),this.qe=Ip(),this.Qe=new ue(Q)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:M()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(tc(s))if(r===0){let a=new L(s.path);this.Ue(t,a,Je.newNoDocument(a,B.min()))}else Z(r===1);else{let a=this.Ye(t);if(a!==r){let c=this.Ze(e),h=c?this.Xe(c,e,a):1;if(h!==0){this.je(t);let d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}yp?.et(function(p,E,D,b,P){var O,N,z,q,K,re;let ke={localCacheCount:p,existenceFilterCount:E.count,databaseId:D.database,projectId:D.projectId},X=E.unchangedNames;return X&&(ke.bloomFilter={applied:P===0,hashCount:(O=X?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(q=(z=(N=X?.bits)===null||N===void 0?void 0:N.bitmap)===null||z===void 0?void 0:z.length)!==null&&q!==void 0?q:0,padding:(re=(K=X?.bits)===null||K===void 0?void 0:K.padding)!==null&&re!==void 0?re:0,mightContain:I=>{var m;return(m=b?.mightContain(I))!==null&&m!==void 0&&m}}),ke}(a,e.me,this.Le.tt(),c,h))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,c;try{a=Bt(r).toUint8Array()}catch(h){if(h instanceof xs)return Vn("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new cc(a,i,s)}catch(h){return Vn(h instanceof on?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,a)=>{let c=this.Je(a);if(c){if(s.current&&tc(c.target)){let h=new L(c.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Je.newNoDocument(h,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=$();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(h=>{let d=this.Je(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));let i=new Vs(e,t,this.Qe,this.ke,r);return this.ke=St(),this.qe=Ip(),this.Qe=new ue(Q),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new js,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Re(Q),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||F("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new js),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Ip(){return new ue(L.comparator)}function wp(){return new ue(L.comparator)}var Aw={asc:"ASCENDING",desc:"DESCENDING"},Dw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sw={and:"AND",or:"OR"},hc=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function dc(n,e){return n.useProto3Json||oo(e)?e:{value:e}}function $s(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sm(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bw(n,e){return $s(n,e.toTimestamp())}function ot(n){return Z(!!n),B.fromTimestamp(function(t){let r=Dt(t);return new Te(r.seconds,r.nanos)}(n))}function El(n,e){return fc(n,e).canonicalString()}function fc(n,e){let t=function(i){return new ae(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function om(n){let e=ae.fromString(n);return Z(hm(e)),e}function pc(n,e){return El(n.databaseId,e.path)}function Pu(n,e){let t=om(e);if(t.get(1)!==n.databaseId.projectId)throw new x(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new L(um(t))}function am(n,e){return El(n.databaseId,e)}function Cw(n){let e=om(n);return e.length===4?ae.emptyPath():um(e)}function mc(n){return new ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function um(n){return Z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Tp(n,e,t){return{name:pc(n,e),fields:t.value.mapValue.fields}}function Rw(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:M()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(Z(p===void 0||typeof p=="string"),Pe.fromBase64String(p||"")):(Z(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Pe.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){let p=d.code===void 0?C.UNKNOWN:im(d.code);return new x(p,d.message||"")}(a);t=new Bs(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Pu(n,r.document.name),s=ot(r.document.updateTime),a=r.document.createTime?ot(r.document.createTime):B.min(),c=new Ue({mapValue:{fields:r.document.fields}}),h=Je.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new Ln(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Pu(n,r.document),s=r.readTime?ot(r.readTime):B.min(),a=Je.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Ln([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Pu(n,r.document),s=r.removedTargetIds||[];t=new Ln([],s,i,null)}else{if(!("filter"in e))return M();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new uc(i,s),c=r.targetId;t=new Us(c,a)}}return t}function Pw(n,e){let t;if(e instanceof dn)t={update:Tp(n,e.key,e.value)};else if(e instanceof Yr)t={delete:pc(n,e.key)};else if(e instanceof ct)t={update:Tp(n,e.key,e.data),updateMask:Uw(e.fieldMask)};else{if(!(e instanceof ic))return M();t={verify:pc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){let c=a.transform;if(c instanceof Kn)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ln)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof hn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wn)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw M()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:bw(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:M()}(n,e.precondition)),t}function kw(n,e){return n&&n.length>0?(Z(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?ot(i.updateTime):ot(s);return a.isEqual(B.min())&&(a=ot(s)),new rc(a,i.transformResults||[])}(t,e))):[]}function Nw(n,e){return{documents:[am(n,e.path)]}}function Ow(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=am(n,i);let s=function(d){if(d.length!==0)return lm(ut.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let a=function(d){if(d.length!==0)return d.map(p=>function(D){return{field:Nn(D.field),direction:Lw(D.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=dc(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function Fw(n){let e=Cw(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Z(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(E){let D=cm(E);return D instanceof ut&&jp(D)?D.getFilters():[D]}(t.where));let a=[];t.orderBy&&(a=function(E){return E.map(D=>function(P){return new zn(On(P.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(D))}(t.orderBy));let c=null;t.limit&&(c=function(E){let D;return D=typeof E=="object"?E.value:E,oo(D)?null:D}(t.limit));let h=null;t.startAt&&(h=function(E){let D=!!E.before,b=E.values||[];return new $n(b,D)}(t.startAt));let d=null;return t.endAt&&(d=function(E){let D=!E.before,b=E.values||[];return new $n(b,D)}(t.endAt)),sw(e,i,a,s,c,"F",h,d)}function xw(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return M()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cm(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=On(t.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=On(t.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=On(t.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=On(t.unaryFilter.field);return _e.create(a,"!=",{nullValue:"NULL_VALUE"});default:return M()}}(n):n.fieldFilter!==void 0?function(t){return _e.create(On(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return M()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ut.create(t.compositeFilter.filters.map(r=>cm(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return M()}}(t.compositeFilter.op))}(n):M()}function Lw(n){return Aw[n]}function Mw(n){return Dw[n]}function Vw(n){return Sw[n]}function Nn(n){return{fieldPath:n.canonicalString()}}function On(n){return Be.fromServerFormat(n.fieldPath)}function lm(n){return n instanceof _e?function(t){if(t.op==="=="){if(cp(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NAN"}};if(up(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cp(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NOT_NAN"}};if(up(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nn(t.field),op:Mw(t.op),value:t.value}}}(n):n instanceof ut?function(t){let r=t.getFilters().map(i=>lm(i));return r.length===1?r[0]:{compositeFilter:{op:Vw(t.op),filters:r}}}(n):M()}function Uw(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Xr=class n{constructor(e,t,r,i,s=B.min(),a=B.min(),c=Pe.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var gc=class{constructor(e){this.ct=e}};function Bw(n){let e=Fw({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nc(e,e.limit,"L"):e}var zs=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(se(e.integerValue));else if("doubleValue"in e){let r=se(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Wr(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Dt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Bt(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Vp(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Mp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):M()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(se(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),L.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};zs.vt=new zs;var _c=class{constructor(){this.un=new yc}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(un.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(un.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},yc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Re(ae.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(ae.comparator)).toArray()}};var CS=new Uint8Array(0);var nt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nt.DEFAULT_COLLECTION_PERCENTILE=10,nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nt.DEFAULT=new nt(41943040,nt.DEFAULT_COLLECTION_PERCENTILE,nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nt.DISABLED=new nt(-1,0,0);var Zr=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var vc=class{constructor(){this.changes=new jt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ec=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ic=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Kr(r.mutation,i,Ke.empty(),Te.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$()){let i=sn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=$r();return s.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=sn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=St(),a=Gr(),c=function(){return Gr()}();return t.forEach((h,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof ct)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Kr(p.mutation,d,p.mutation.getFieldMask(),Te.now())):a.set(d.key,Ke.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var E;return c.set(d,new Ec(p,(E=a.get(d))!==null&&E!==void 0?E:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Gr(),i=new ue((a,c)=>a-c),s=$();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(h=>{let d=t.get(h);if(d===null)return;let p=r.get(h)||Ke.empty();p=c.applyToLocalView(d,p),r.set(h,p);let E=(i.get(c.batchId)||$()).add(h);i=i.insert(c.batchId,E)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let h=c.getNext(),d=h.key,p=h.value,E=Yp();p.forEach(D=>{if(!s.has(D)){let b=nm(t.get(D),r.get(D));b!==null&&E.set(D,b),s=s.add(D)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,E))}return R.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return L.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):R.resolve(sn()),c=-1,h=s;return a.next(d=>R.forEach(d,(p,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),s.get(p)?R.resolve():this.remoteDocumentCache.getEntry(e,p).next(D=>{h=h.insert(p,D)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,h,d,$())).next(p=>({batchId:c,changes:Qp(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new L(t)).next(r=>{let i=$r();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=$r();return this.indexManager.getCollectionParents(e,s).next(c=>R.forEach(c,h=>{let d=function(E,D){return new qn(D,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((E,D)=>{a=a.insert(E,D)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((h,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,Je.newInvalidDocument(p)))});let c=$r();return a.forEach((h,d)=>{let p=s.get(h);p!==void 0&&Kr(p.mutation,d,Ke.empty(),Te.now()),uo(t,d)&&(c=c.insert(h,d))}),c})}};var wc=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ot(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Bw(i.bundledQuery),readTime:ot(i.readTime)}}(t)),R.resolve()}};var Tc=class{constructor(){this.overlays=new ue(L.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=sn();return R.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=sn(),s=t.length+1,a=new L(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ue((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=sn(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let c=sn(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return R.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ac(t,r));let s=this.Ir.get(t);s===void 0&&(s=$(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var Ac=class{constructor(){this.sessionToken=Pe.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var ei=class{constructor(){this.Tr=new Re(me.Er),this.dr=new Re(me.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new me(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new me(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new L(new ae([])),r=new me(t,e),i=new me(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new L(new ae([])),r=new me(t,e),i=new me(t,e+1),s=$();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new me(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},me=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return L.comparator(e.key,t.key)||Q(e.wr,t.wr)}static Ar(e,t){return Q(e.wr,t.wr)||L.comparator(e.key,t.key)}};var Dc=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Re(me.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new sc(s,t,r,i);this.mutationQueue.push(a);for(let c of i)this.br=this.br.add(new me(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return R.resolve(a)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new me(t,0),i=new me(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{let c=this.Dr(a.wr);s.push(c)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(Q);return t.forEach(i=>{let s=new me(i,0),a=new me(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;L.isDocumentKey(s)||(s=s.child(""));let a=new me(new L(s),0),c=new Re(Q);return this.br.forEachWhile(h=>{let d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.wr)),!0)},a),R.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let s=new me(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new me(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Sc=class{constructor(e){this.Mr=e,this.docs=function(){return new ue(L.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(t))}getEntries(e,t){let r=St();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Je.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=St(),a=t.path,c=new L(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){let{key:d,value:{document:p}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||HI(WI(p),r)<=0||(i.has(p.key)||uo(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,t,r,i){M()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bc(this)}getSize(e){return R.resolve(this.size)}},bc=class extends vc{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Cc=class{constructor(e){this.persistence=e,this.Nr=new jt(t=>_l(t),yl),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ei,this.targetCount=0,this.kr=Zr.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Zr(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var Rc=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new xp(0),this.Kr=!1,this.Kr=!0,this.$r=new Ac,this.referenceDelegate=e(this),this.Ur=new Cc(this),this.indexManager=new _c,this.remoteDocumentCache=function(i){return new Sc(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new gc(t),this.Gr=new wc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Dc(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){F("MemoryPersistence","Starting transaction:",e);let i=new Pc(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Pc=class extends $u{constructor(e){super(),this.currentSequenceNumber=e}},kc=class n{constructor(e){this.persistence=e,this.Jr=new ei,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw M()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=L.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,B.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Nc=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=$(),i=$();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Oc=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Fc=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kd()?8:YI(ye())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new Oc;return this.Xi(e,t,a).next(c=>{if(s.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(jr()<=j.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",kn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(jr()<=j.DEBUG&&F("QueryEngine","Query:",kn(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(jr()<=j.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",kn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,st(t))):R.resolve())}Yi(e,t){if(fp(t))return R.resolve(null);let r=st(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=nc(t,null,"F"),r=st(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=$(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{let d=this.ts(t,c);return this.ns(t,d,a,h.readTime)?this.Yi(e,nc(t,null,"F")):this.rs(e,d,t,h)}))})))}Zi(e,t,r,i){return fp(t)||i.isEqual(B.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let a=this.ts(t,s);return this.ns(t,a,r,i)?R.resolve(null):(jr()<=j.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kn(t)),this.rs(e,a,t,KI(i,-1)).next(c=>c))})}ts(e,t){let r=new Re(Wp(e));return t.forEach((i,s)=>{uo(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return jr()<=j.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",kn(t)),this.Ji.getDocumentsMatchingQuery(e,t,un.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var xc=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ue(Q),this._s=new jt(s=>_l(s),yl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ic(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function jw(n,e,t,r){return new xc(n,e,t,r)}function dm(n,e){return y(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],c=[],h=$();for(let d of i){a.push(d.batchId);for(let p of d.mutations)h=h.add(p.key)}for(let d of s){c.push(d.batchId);for(let p of d.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})})}function $w(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,h,d,p){let E=d.batch,D=E.keys(),b=R.resolve();return D.forEach(P=>{b=b.next(()=>p.getEntry(h,P)).next(O=>{let N=d.docVersions.get(P);Z(N!==null),O.version.compareTo(N)<0&&(E.applyToRemoteDocument(O,d),O.isValidDocument()&&(O.setReadTime(d.commitVersion),p.addEntry(O)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(h,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=$();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fm(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function zw(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((p,E)=>{let D=i.get(E);if(!D)return;c.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,E).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,E)));let b=D.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(Pe.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(E,b),function(O,N,z){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(D,b,p)&&c.push(t.Ur.updateTargetData(s,b))});let h=St(),d=$();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(qw(s,a,e.documentUpdates).next(p=>{h=p.Ps,d=p.Is})),!r.isEqual(B.min())){let p=t.Ur.getLastRemoteSnapshotVersion(s).next(E=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return R.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,h,d)).next(()=>h)}).then(s=>(t.os=i,s))}function qw(n,e,t){let r=$(),i=$();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=St();return t.forEach((c,h)=>{let d=s.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(B.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):F("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function Gw(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kw(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new Xr(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Lc(n,e,t){return y(this,null,function*(){let r=U(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!oi(a))throw a;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Ap(n,e,t){let r=U(n),i=B.min(),s=$();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,d,p){let E=U(h),D=E._s.get(p);return D!==void 0?R.resolve(E.os.get(D)):E.Ur.getTargetData(d,p)}(r,a,st(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(h=>{s=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:B.min(),t?s:$())).next(c=>(Ww(r,uw(e),c),{documents:c,Ts:s})))}function Ww(n,e,t){let r=n.us.get(e)||B.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var qs=class{constructor(){this.activeTargetIds=pw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Mc=class{constructor(){this.so=new qs,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qs,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Vc=class{_o(e){}shutdown(){}};var Gs=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cs=null;function ku(){return Cs===null?Cs=function(){return 268435456+Math.round(2147483648*Math.random())}():Cs++,"0x"+Cs.toString(16)}var Hw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Uc=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Ce="WebChannelConnection",Bc=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){let c=ku(),h=this.xo(t,r.toUriEncodedString());F("RestConnection",`Sending RPC '${t}' ${c}:`,h,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,h,d,i).then(p=>(F("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw Vn("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",h,"request:",i),p})}Lo(t,r,i,s,a,c){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xn}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){let i=Hw[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=ku();return new Promise((a,c)=>{let h=new Du;h.setWithCredentials(!0),h.listenOnce(Su.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Br.NO_ERROR:let p=h.getResponseJson();F(Ce,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Br.TIMEOUT:F(Ce,`RPC '${e}' ${s} timed out`),c(new x(C.DEADLINE_EXCEEDED,"Request time out"));break;case Br.HTTP_ERROR:let E=h.getStatus();if(F(Ce,`RPC '${e}' ${s} failed with status:`,E,"response text:",h.getResponseText()),E>0){let D=h.getResponseJson();Array.isArray(D)&&(D=D[0]);let b=D?.error;if(b&&b.status&&b.message){let P=function(N){let z=N.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(z)>=0?z:C.UNKNOWN}(b.status);c(new x(P,b.message))}else c(new x(C.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new x(C.UNAVAILABLE,"Connection failed."));break;default:M()}}finally{F(Ce,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);F(Ce,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=ku(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ru(),c=Cu(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;let p=s.join("");F(Ce,`Creating RPC '${e}' stream ${i}: ${p}`,h);let E=a.createWebChannel(p,h),D=!1,b=!1,P=new Uc({Io:N=>{b?F(Ce,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(D||(F(Ce,`Opening RPC '${e}' stream ${i} transport.`),E.open(),D=!0),F(Ce,`RPC '${e}' stream ${i} sending:`,N),E.send(N))},To:()=>E.close()}),O=(N,z,q)=>{N.listen(z,K=>{try{q(K)}catch(re){setTimeout(()=>{throw re},0)}})};return O(E,Pn.EventType.OPEN,()=>{b||(F(Ce,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),O(E,Pn.EventType.CLOSE,()=>{b||(b=!0,F(Ce,`RPC '${e}' stream ${i} transport closed`),P.So())}),O(E,Pn.EventType.ERROR,N=>{b||(b=!0,Vn(Ce,`RPC '${e}' stream ${i} transport errored:`,N),P.So(new x(C.UNAVAILABLE,"The operation could not be completed")))}),O(E,Pn.EventType.MESSAGE,N=>{var z;if(!b){let q=N.data[0];Z(!!q);let K=q,re=K.error||((z=K[0])===null||z===void 0?void 0:z.error);if(re){F(Ce,`RPC '${e}' stream ${i} received error:`,re);let ke=re.status,X=function(_){let v=pe[_];if(v!==void 0)return im(v)}(ke),I=re.message;X===void 0&&(X=C.INTERNAL,I="Unknown error status: "+ke+" with message "+re.message),b=!0,P.So(new x(X,I)),E.close()}else F(Ce,`RPC '${e}' stream ${i} received:`,q),P.bo(q)}}),O(c,bu.STAT_EVENT,N=>{N.stat===Ss.PROXY?F(Ce,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Ss.NOPROXY&&F(Ce,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}};function Nu(){return typeof document<"u"?document:null}function co(n){return new hc(n,!0)}var Ks=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ws=class{constructor(e,t,r,i,s,a,c,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ks(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(At(t.toString()),At("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new x(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jc=class extends Ws{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Rw(this.serializer,e),r=function(s){if(!("targetChange"in s))return B.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?B.min():a.readTime?ot(a.readTime):B.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=mc(this.serializer),t.addTarget=function(s,a){let c,h=a.target;if(c=tc(h)?{documents:Nw(s,h)}:{query:Ow(s,h)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=sm(s,a.resumeToken);let d=dc(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(B.min())>0){c.readTime=$s(s,a.snapshotVersion.toTimestamp());let d=dc(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=xw(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=mc(this.serializer),t.removeTarget=e,this.a_(t)}},$c=class extends Ws{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=kw(e.writeResults,e.commitTime),r=ot(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=mc(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Pw(this.serializer,r))};this.a_(t)}};var zc=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new x(C.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,fc(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(C.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,fc(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new x(C.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},qc=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(At(t),this.D_=!1):F("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Gc=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(()=>y(this,null,function*(){gn(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(h){return y(this,null,function*(){let d=U(h);d.L_.add(4),yield ai(d),d.q_.set("Unknown"),d.L_.delete(4),yield lo(d)})}(this))}))}),this.q_=new qc(r,i)}};function lo(n){return y(this,null,function*(){if(gn(n))for(let e of n.B_)yield e(!0)})}function ai(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function pm(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Al(t)?Tl(t):Zn(t).r_()&&wl(t,e))}function Il(n,e){let t=U(n),r=Zn(t);t.N_.delete(e),r.r_()&&mm(t,e),t.N_.size===0&&(r.r_()?r.o_():gn(t)&&t.q_.set("Unknown"))}function wl(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(B.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zn(n).A_(e)}function mm(n,e){n.Q_.xe(e),Zn(n).R_(e)}function Tl(n){n.Q_=new lc({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Zn(n).start(),n.q_.v_()}function Al(n){return gn(n)&&!Zn(n).n_()&&n.N_.size>0}function gn(n){return U(n).L_.size===0}function gm(n){n.Q_=void 0}function Qw(n){return y(this,null,function*(){n.q_.set("Online")})}function Yw(n){return y(this,null,function*(){n.N_.forEach((e,t)=>{wl(n,e)})})}function Jw(n,e){return y(this,null,function*(){gm(n),Al(n)?(n.q_.M_(e),Tl(n)):n.q_.set("Unknown")})}function Xw(n,e,t){return y(this,null,function*(){if(n.q_.set("Online"),e instanceof Bs&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let a=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hs(n,r)}else if(e instanceof Ln?n.Q_.Ke(e):e instanceof Us?n.Q_.He(e):n.Q_.We(e),!t.isEqual(B.min()))try{let r=yield fm(n.localStore);t.compareTo(r)>=0&&(yield function(s,a){let c=s.Q_.rt(a);return c.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){let p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,d)=>{let p=s.N_.get(h);if(!p)return;s.N_.set(h,p.withResumeToken(Pe.EMPTY_BYTE_STRING,p.snapshotVersion)),mm(s,h);let E=new Xr(p.target,h,d,p.sequenceNumber);wl(s,E)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield Hs(n,r)}})}function Hs(n,e,t){return y(this,null,function*(){if(!oi(e))throw e;n.L_.add(1),yield ai(n),n.q_.set("Offline"),t||(t=()=>fm(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield lo(n)}))})}function _m(n,e){return e().catch(t=>Hs(n,t,e))}function ho(n){return y(this,null,function*(){let e=U(n),t=$t(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Zw(e);)try{let i=yield Gw(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,e0(e,i)}catch(i){yield Hs(e,i)}ym(e)&&vm(e)})}function Zw(n){return gn(n)&&n.O_.length<10}function e0(n,e){n.O_.push(e);let t=$t(n);t.r_()&&t.V_&&t.m_(e.mutations)}function ym(n){return gn(n)&&!$t(n).n_()&&n.O_.length>0}function vm(n){$t(n).start()}function t0(n){return y(this,null,function*(){$t(n).p_()})}function n0(n){return y(this,null,function*(){let e=$t(n);for(let t of n.O_)e.m_(t.mutations)})}function r0(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=oc.from(r,e,t);yield _m(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ho(n)})}function i0(n,e){return y(this,null,function*(){e&&$t(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(a){return Iw(a)&&a!==C.ABORTED}(i.code)){let s=r.O_.shift();$t(r).s_(),yield _m(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield ho(r)}})}(n,e)),ym(n)&&vm(n)})}function Dp(n,e){return y(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=gn(t);t.L_.add(3),yield ai(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield lo(t)})}function s0(n,e){return y(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield lo(t)):e||(t.L_.add(2),yield ai(t),t.q_.set("Unknown"))})}function Zn(n){return n.K_||(n.K_=function(t,r,i){let s=U(t);return s.w_(),new jc(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Qw.bind(null,n),Ro:Yw.bind(null,n),mo:Jw.bind(null,n),d_:Xw.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.K_.s_(),Al(n)?Tl(n):n.q_.set("Unknown")):(yield n.K_.stop(),gm(n))}))),n.K_}function $t(n){return n.U_||(n.U_=function(t,r,i){let s=U(t);return s.w_(),new $c(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:t0.bind(null,n),mo:i0.bind(null,n),f_:n0.bind(null,n),g_:r0.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield ho(n)):(yield n.U_.stop(),n.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Kc=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Dl(n,e){if(At("AsyncQueue",`${e}: ${n}`),oi(n))return new x(C.UNAVAILABLE,`${e}: ${n}`);throw n}var Qs=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||L.comparator(t.key,r.key):(t,r)=>L.comparator(t.key,r.key),this.keyedMap=$r(),this.sortedSet=new ue(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ys=class{constructor(){this.W_=new ue(L.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):M():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Qn=class n{constructor(e,t,r,i,s,a,c,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,Qs.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ao(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Wc=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Hc=class{constructor(){this.queries=Sp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),s=i.queries;i.queries=Sp(),s.forEach((a,c)=>{for(let h of c.j_)h.onError(r)})})(this,new x(C.ABORTED,"Firestore shutting down"))}};function Sp(){return new jt(n=>Kp(n),ao)}function o0(n,e){return y(this,null,function*(){let t=U(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Wc,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let c=Dl(a,`Initialization of query '${kn(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Sl(t)})}function a0(n,e){return y(this,null,function*(){let t=U(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function u0(n,e){let t=U(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&Sl(t)}function c0(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Sl(n){n.Y_.forEach(e=>{e.next()})}var Qc,bp;(bp=Qc||(Qc={})).ea="default",bp.Cache="cache";var Yc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Qn(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Qn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qc.Cache}};var Js=class{constructor(e){this.key=e}},Xs=class{constructor(e){this.key=e}},Jc=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$(),this.mutatedKeys=$(),this.Aa=Wp(e),this.Ra=new Qs(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Ys,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,E)=>{let D=i.get(p),b=uo(this.query,E)?E:null,P=!!D&&this.mutatedKeys.has(D.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),N=!1;D&&b?D.data.isEqual(b.data)?P!==O&&(r.track({type:3,doc:b}),N=!0):this.ga(D,b)||(r.track({type:2,doc:b}),N=!0,(h&&this.Aa(b,h)>0||d&&this.Aa(b,d)<0)&&(c=!0)):!D&&b?(r.track({type:0,doc:b}),N=!0):D&&!b&&(r.track({type:1,doc:D}),N=!0,(h||d)&&(c=!0)),N&&(b?(a=a.add(b),s=O?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((p,E)=>function(b,P){let O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M()}};return O(b)-O(P)}(p.type,E.type)||this.Aa(p.doc,E.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,d=h!==this.Ea;return this.Ea=h,a.length!==0||d?{snapshot:new Qn(this.query,e.Ra,s,a,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ys,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=$(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Xs(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Js(r))}),t}ba(e){this.Ta=e.Ts,this.da=$();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Qn.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Xc=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Zc=class{constructor(e){this.key=e,this.va=!1}},el=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new jt(c=>Kp(c),ao),this.Ma=new Map,this.xa=new Set,this.Oa=new ue(L.comparator),this.Na=new Map,this.La=new ei,this.Ba={},this.ka=new Map,this.qa=Zr.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function l0(n,e,t=!0){return y(this,null,function*(){let r=Dm(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Em(r,e,t,!0),i})}function h0(n,e){return y(this,null,function*(){let t=Dm(n);yield Em(t,e,!0,!1)})}function Em(n,e,t,r){return y(this,null,function*(){let i=yield Kw(n.localStore,st(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield d0(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&pm(n.remoteStore,i),c})}function d0(n,e,t,r,i){return y(this,null,function*(){n.Ka=(E,D,b)=>function(O,N,z,q){return y(this,null,function*(){let K=N.view.ma(z);K.ns&&(K=yield Ap(O.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,K)));let re=q&&q.targetChanges.get(N.targetId),ke=q&&q.targetMismatches.get(N.targetId)!=null,X=N.view.applyChanges(K,O.isPrimaryClient,re,ke);return Rp(O,N.targetId,X.wa),X.snapshot})}(n,E,D,b);let s=yield Ap(n.localStore,e,!0),a=new Jc(e,s.Ts),c=a.ma(s.documents),h=Jr.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,h);Rp(n,t,d.wa);let p=new Xc(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function f0(n,e,t){return y(this,null,function*(){let r=U(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!ao(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Lc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Il(r.remoteStore,i.targetId),tl(r,i.targetId)}).catch(si))):(tl(r,i.targetId),yield Lc(r.localStore,i.targetId,!0))})}function p0(n,e){return y(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Il(t.remoteStore,r.targetId))})}function m0(n,e,t){return y(this,null,function*(){let r=w0(n);try{let i=yield function(a,c){let h=U(a),d=Te.now(),p=c.reduce((b,P)=>b.add(P.key),$()),E,D;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let P=St(),O=$();return h.cs.getEntries(b,p).next(N=>{P=N,P.forEach((z,q)=>{q.isValidDocument()||(O=O.add(z))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,P)).next(N=>{E=N;let z=[];for(let q of c){let K=Ew(q,E.get(q.key).overlayedDocument);K!=null&&z.push(new ct(q.key,K,Up(K.value.mapValue),Tt.exists(!0)))}return h.mutationQueue.addMutationBatch(b,d,z,c)}).next(N=>{D=N;let z=N.applyToLocalDocumentSet(E,O);return h.documentOverlayCache.saveOverlays(b,N.batchId,z)})}).then(()=>({batchId:D.batchId,changes:Qp(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let d=a.Ba[a.currentUser.toKey()];d||(d=new ue(Q)),d=d.insert(c,h),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),yield ui(r,i.changes),yield ho(r.remoteStore)}catch(i){let s=Dl(i,"Failed to persist write");t.reject(s)}})}function Im(n,e){return y(this,null,function*(){let t=U(n);try{let r=yield zw(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Na.get(s);a&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Z(a.va):i.removedDocuments.size>0&&(Z(a.va),a.va=!1))}),yield ui(t,r,e)}catch(r){yield si(r)}})}function Cp(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,a)=>{let c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){let h=U(a);h.onlineState=c;let d=!1;h.queries.forEach((p,E)=>{for(let D of E.j_)D.Z_(c)&&(d=!0)}),d&&Sl(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g0(n,e,t){return y(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let a=new ue(L.comparator);a=a.insert(s,Je.newNoDocument(s,B.min()));let c=$().add(s),h=new Vs(B.min(),new Map,new ue(Q),a,c);yield Im(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),bl(r)}else yield Lc(r.localStore,e,!1).then(()=>tl(r,e,t)).catch(si)})}function _0(n,e){return y(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield $w(t.localStore,e);Tm(t,r,null),wm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ui(t,i)}catch(i){yield si(i)}})}function y0(n,e,t){return y(this,null,function*(){let r=U(n);try{let i=yield function(a,c){let h=U(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return h.mutationQueue.lookupMutationBatch(d,c).next(E=>(Z(E!==null),p=E.keys(),h.mutationQueue.removeMutationBatch(d,E))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>h.localDocuments.getDocuments(d,p))})}(r.localStore,e);Tm(r,e,t),wm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ui(r,i)}catch(i){yield si(i)}})}function wm(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Tm(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function tl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Am(n,r)})}function Am(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Il(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),bl(n))}function Rp(n,e,t){for(let r of t)r instanceof Js?(n.La.addReference(r.key,e),v0(n,r)):r instanceof Xs?(F("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Am(n,r.key)):M()}function v0(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(F("SyncEngine","New document in limbo: "+t),n.xa.add(r),bl(n))}function bl(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new L(ae.fromString(e)),r=n.qa.next();n.Na.set(r,new Zc(t)),n.Oa=n.Oa.insert(t,r),pm(n.remoteStore,new Xr(st(Gp(t.path)),r,"TargetPurposeLimboResolution",xp.oe))}}function ui(n,e,t){return y(this,null,function*(){let r=U(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,h)=>{a.push(r.Ka(h,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){let E=d?!d.fromCache:(p=t?.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,E?"current":"not-current")}if(d){i.push(d);let E=Nc.Wi(h.targetId,d);s.push(E)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(h,d){return y(this,null,function*(){let p=U(h);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>R.forEach(d,D=>R.forEach(D.$i,b=>p.persistence.referenceDelegate.addReference(E,D.targetId,b)).next(()=>R.forEach(D.Ui,b=>p.persistence.referenceDelegate.removeReference(E,D.targetId,b)))))}catch(E){if(!oi(E))throw E;F("LocalStore","Failed to update sequence numbers: "+E)}for(let E of d){let D=E.targetId;if(!E.fromCache){let b=p.os.get(D),P=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(P);p.os=p.os.insert(D,O)}}})}(r.localStore,s))})}function E0(n,e){return y(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield dm(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(h=>{h.reject(new x(C.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ui(t,r.hs)}})}function I0(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return $().add(r.key);{let i=$(),s=t.Ma.get(e);if(!s)return i;for(let a of s){let c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function Dm(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Im.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g0.bind(null,e),e.Ca.d_=u0.bind(null,e.eventManager),e.Ca.$a=c0.bind(null,e.eventManager),e}function w0(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y0.bind(null,e),e}var Pp=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=co(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return jw(this.persistence,new Fc,t.initialUser,this.serializer)}Ga(t){return new Rc(kc.Zr,this.serializer)}Wa(t){return new Mc}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var T0=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Cp(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=E0.bind(null,this.syncEngine),yield s0(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Hc}()}createDatastore(t){let r=co(t.databaseInfo.databaseId),i=function(a){return new Bc(a)}(t.databaseInfo);return function(a,c,h,d){return new zc(a,c,h,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,a,c,h){return new Gc(i,s,a,c,h)}(this.localStore,this.datastore,t.asyncQueue,r=>Cp(this.syncEngine,r,0),function(){return Gs.D()?new Gs:new Vc}())}createSyncEngine(t,r){return function(s,a,c,h,d,p,E){let D=new el(s,a,c,h,d,p);return E&&(D.Qa=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(s){return y(this,null,function*(){let a=U(s);F("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield ai(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var nl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):At("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var rl=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ee.UNAUTHENTICATED,this.clientId=Ns.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,a=>y(this,null,function*(){F("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(F("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Dl(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ou(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield dm(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function kp(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield A0(n);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Dp(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Dp(e.remoteStore,i)),n._onlineComponents=e})}function A0(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ou(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===C.FAILED_PRECONDITION||i.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Vn("Error using user provided cache. Falling back to memory cache: "+t),yield Ou(n,new Pp)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield Ou(n,new Pp);return n._offlineComponents})}function Sm(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield kp(n,n._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield kp(n,new T0))),n._onlineComponents})}function D0(n){return Sm(n).then(e=>e.syncEngine)}function S0(n){return y(this,null,function*(){let e=yield Sm(n),t=e.eventManager;return t.onListen=l0.bind(null,e.syncEngine),t.onUnlisten=f0.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=h0.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=p0.bind(null,e.syncEngine),t})}function b0(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,a,c,h,d){let p=new nl({next:D=>{p.Za(),a.enqueueAndForget(()=>a0(s,E)),D.fromCache&&h.source==="server"?d.reject(new x(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(D)},error:D=>d.reject(D)}),E=new Yc(c,p,{includeMetadataChanges:!0,_a:!0});return o0(s,E)}(yield S0(n),n.asyncQueue,e,t,r)})),r.promise}function bm(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Np=new Map;function Cm(n,e,t){if(!t)throw new x(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function C0(n,e,t,r){if(e===!0&&r===!0)throw new x(C.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Op(n){if(!L.isDocumentKey(n))throw new x(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fp(n){if(L.isDocumentKey(n))throw new x(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":M()}function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Cl(n);throw new x(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Zs=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bm((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new x(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new x(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new x(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Yn=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zs({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zs(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fu;switch(r.type){case"firstParty":return new Vu(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Np.get(t);r&&(F("ComponentProvider","Removing Datastore"),Np.delete(t),r.terminate())}(this),Promise.resolve()}};function R0(n,e,t,r={}){var i;let s=(n=fn(n,Yn))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Vn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=Ee.MOCK_USER;else{c=Dd(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new x(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ee(d)}n._authCredentials=new xu(new ks(c,h))}}var eo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},We=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ut(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ut=class n extends eo{constructor(e,t,r){super(e,t,Gp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new L(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Rl(n,e,...t){if(n=ve(n),Cm("collection","path",e),n instanceof Yn){let r=ae.fromString(e,...t);return Fp(r),new Ut(n,null,r)}{if(!(n instanceof We||n instanceof Ut))throw new x(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ae.fromString(e,...t));return Fp(r),new Ut(n.firestore,null,r)}}function fo(n,e,...t){if(n=ve(n),arguments.length===1&&(e=Ns.newId()),Cm("doc","path",e),n instanceof Yn){let r=ae.fromString(e,...t);return Op(r),new We(n,null,new L(r))}{if(!(n instanceof We||n instanceof Ut))throw new x(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ae.fromString(e,...t));return Op(r),new We(n.firestore,n instanceof Ut?n.converter:null,new L(r))}}var to=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ks(this,"async_queue_retry"),this.Vu=()=>{let r=Nu();r&&F("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Nu();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Nu();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!oi(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw At("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Kc.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&M()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var pn=class extends Yn{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new to,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new to(e),this._firestoreClient=void 0,yield e}})}};function Rm(n,e){let t=typeof n=="object"?n:Dn(),r=typeof n=="string"?n:e||"(default)",i=Cr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ad("firestore");s&&R0(i,...s)}return i}function Pm(n){if(n._terminated)throw new x(C.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||P0(n),n._firestoreClient}function P0(n){var e,t,r;let i=n._freezeSettings(),s=function(c,h,d,p){return new zu(c,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,bm(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new rl(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let h=c?._online.build();return{_offline:c?._offline.build(h),_online:h}}(n._componentsProvider))}var ti=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Pe.fromBase64String(e))}catch(t){throw new x(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Pe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ni=class{constructor(e){this._methodName=e}};var ri=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}};var ii=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var k0=/^__.*__$/,il=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ct(e,this.data,this.fieldMask,t,this.fieldTransforms):new dn(e,this.data,t,this.fieldTransforms)}},no=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ct(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function km(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M()}}var sl=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return io(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(km(this.Cu)&&k0.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},ol=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||co(e)}Qu(e,t,r,i=!1){return new sl({Cu:e,methodName:t,qu:r,path:Be.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Nm(n){let e=n._freezeSettings(),t=co(n._databaseId);return new ol(n._databaseId,!!e.ignoreUndefinedProperties,t)}function N0(n,e,t,r,i,s={}){let a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Pl("Data must be an object, but it was:",a,r);let c=Om(r,a),h,d;if(s.merge)h=new Ke(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let E of s.mergeFields){let D=al(e,E,t);if(!a.contains(D))throw new x(C.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);xm(p,D)||p.push(D)}h=new Ke(p),d=a.fieldTransforms.filter(E=>h.covers(E.field))}else h=null,d=a.fieldTransforms;return new il(new Ue(c),h,d)}var ro=class n extends ni{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function O0(n,e,t,r){let i=n.Qu(1,e,t);Pl("Data must be an object, but it was:",i,r);let s=[],a=Ue.empty();mn(r,(h,d)=>{let p=kl(e,h,t);d=ve(d);let E=i.Nu(p);if(d instanceof ro)s.push(p);else{let D=po(d,E);D!=null&&(s.push(p),a.set(p,D))}});let c=new Ke(s);return new no(a,c,i.fieldTransforms)}function F0(n,e,t,r,i,s){let a=n.Qu(1,e,t),c=[al(e,r,t)],h=[i];if(s.length%2!=0)throw new x(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<s.length;D+=2)c.push(al(e,s[D])),h.push(s[D+1]);let d=[],p=Ue.empty();for(let D=c.length-1;D>=0;--D)if(!xm(d,c[D])){let b=c[D],P=h[D];P=ve(P);let O=a.Nu(b);if(P instanceof ro)d.push(b);else{let N=po(P,O);N!=null&&(d.push(b),p.set(b,N))}}let E=new Ke(d);return new no(p,E,a.fieldTransforms)}function po(n,e){if(Fm(n=ve(n)))return Pl("Unsupported field value:",e,n),Om(n,e);if(n instanceof ni)return function(r,i){if(!km(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let c of r){let h=po(c,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mw(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Te.fromDate(r);return{timestampValue:$s(i.serializer,s)}}if(r instanceof Te){let s=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$s(i.serializer,s)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ti)return{bytesValue:sm(i.serializer,r._byteString)};if(r instanceof We){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:El(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ii)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Bu("VectorValues must only contain numeric values.");return vl(c.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Cl(r)}`)}(n,e)}function Om(n,e){let t={};return Lp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mn(n,(r,i)=>{let s=po(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Fm(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Te||n instanceof ri||n instanceof ti||n instanceof We||n instanceof ni||n instanceof ii)}function Pl(n,e,t){if(!Fm(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Cl(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function al(n,e,t){if((e=ve(e))instanceof Jn)return e._internalPath;if(typeof e=="string")return kl(n,e);throw io("Field path arguments must be of type string or ",n,!1,void 0,t)}var x0=new RegExp("[~\\*/\\[\\]]");function kl(n,e,t){if(e.search(x0)>=0)throw io(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jn(...e.split("."))._internalPath}catch{throw io(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function io(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new x(C.INVALID_ARGUMENT,c+n+h)}function xm(n,e){return n.some(t=>t.isEqual(e))}var so=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ul(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Lm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ul=class extends so{data(){return super.data()}};function Lm(n,e){return typeof e=="string"?kl(n,e):e instanceof Jn?e._internalPath:e._delegate._internalPath}function L0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cl=class{convertValue(e,t="none"){switch(cn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw M()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return mn(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>se(a.doubleValue));return new ii(s)}convertGeoPoint(e){return new ri(se(e.latitude),se(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ml(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hr(e));default:return null}}convertTimestamp(e){let t=Dt(e);return new Te(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ae.fromString(e);Z(hm(r));let i=new Ls(r.get(1),r.get(3)),s=new L(r.popFirst(5));return i.isEqual(t)||At(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function M0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var xn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ll=class extends so{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Mn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Mn=class extends ll{data(e={}){return super.data(e)}},hl=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mn(this._firestore,this._userDataWriter,r.key,r,new xn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let h=new Mn(i._firestore,i._userDataWriter,c.doc.key,c.doc,new xn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let h=new Mn(i._firestore,i._userDataWriter,c.doc.key,c.doc,new xn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:V0(c.type),doc:h,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function V0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return M()}}var dl=class extends cl{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,t)}};function Mm(n){n=fn(n,eo);let e=fn(n.firestore,pn),t=Pm(e),r=new dl(e);return L0(n._query),b0(t,n._query).then(i=>new hl(e,r,n,i))}function Vm(n,e,t,...r){n=fn(n,We);let i=fn(n.firestore,pn),s=Nm(i),a;return a=typeof(e=ve(e))=="string"||e instanceof Jn?F0(s,"updateDoc",n._key,e,t,r):O0(s,"updateDoc",n._key,e),Nl(i,[a.toMutation(n._key,Tt.exists(!0))])}function Um(n){return Nl(fn(n.firestore,pn),[new Yr(n._key,Tt.none())])}function Bm(n,e){let t=fn(n.firestore,pn),r=fo(n),i=M0(n.converter,e);return Nl(t,[N0(Nm(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Tt.exists(!1))]).then(()=>r)}function Nl(n,e){return function(r,i){let s=new rt;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return m0(yield D0(r),i,s)})),s.promise}(Pm(n),e)}(function(e,t=!0){(function(i){Xn=i})(xt),Ft(new qe("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new pn(new Lu(r.getProvider("auth-internal")),new Bu(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new x(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ls(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),we(ip,"4.7.3",e),we(ip,"4.7.3","esm2017")})();var jm=class n{app=Bi(tp);db=Rm(this.app);auth=ce(vt);constructor(){}addTask(e){return y(this,null,function*(){let t=this.auth.currentUser;if(t){let r=Rl(this.db,`users/${t.uid}/checklists`);yield Bm(r,Le({},e))}else console.log("not login")})}getTasks(){let e=this.auth.currentUser?.uid;return new je(t=>{if(!e){t.error("User Not Ligged In");return}let r=Rl(this.db,`users/${e}/checklists`);Mm(r).then(i=>{let s=i.docs.map(a=>{let c=a.data();return{id:a.id,date:c.date.toDate(),title:c.title,tasks:c.tasks}});t.next(s),t.complete()}).catch(i=>{t.error(i)})})}deleteTask(e){Um(fo(this.db,`users/${this.auth.currentUser?.uid}/checklists/${e}`))}updateTask(e,t){let r=fo(this.db,`users/${this.auth.currentUser?.uid}/checklists/${e}`);Vm(r,Le({},t))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ol=Ed("notes"),WS=Ar(Ol,n=>n.userName),HS=Ar(Ol,n=>n.tasks),QS=Ar(Ol,n=>n.curentTask);var $m=class n{destroy$=new Si;ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Pi({type:n,selectors:[["","appClearObservable",""]],standalone:!0})};export{gu as a,xD as b,jf as c,Hf as d,fI as e,LD as f,MD as g,VD as h,UD as i,BD as j,jD as k,$D as l,Kf as m,Xo as n,le as o,ld as p,Tn as q,oa as r,id as s,rT as t,wr as u,Fi as v,Cg as w,aa as x,xi as y,ua as z,iT as A,sT as B,oT as C,KD as D,WD as E,HD as F,QD as G,JD as H,XD as I,ZD as J,eS as K,nS as L,rS as M,iS as N,sS as O,oS as P,aS as Q,uS as R,cS as S,lS as T,hS as U,Bi as V,tp as W,QT as X,qA as Y,GA as Z,jm as _,WS as $,HS as aa,QS as ba,$m as ca,Bf as da};
